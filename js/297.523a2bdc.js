"use strict";(self["webpackChunknovatool_claude"]=self["webpackChunknovatool_claude"]||[]).push([[297],{4297:function(l,a,e){e.r(a),e.d(a,{default:function(){return E}});e(4114),e(8111),e(2489),e(7588),e(1701),e(8237);var t=e(6768),c=e(4232),n=e(5130),s=e(144),u=e(6912);const d={class:"container"},o={class:"section-card"},i={class:"file-upload-button"},v={key:0,class:"selected-filename"},r={key:0,class:"section-card"},p={class:"scrollable-container"},h={class:"data-table"},k={class:"data-cell"},_={class:"data-cell"},m={class:"data-cell"},L={class:"data-cell"},x={key:1,class:"empty-state"},f={key:0},g={key:1,class:"empty-state"},C={key:0},F={class:"stats-table"},b={key:1,class:"empty-state"};var M={__name:"NmeaCEPCalc",setup(l){u.t1.register(u.Pz,u.kc,u.FN,u.hE);const a=(0,s.KR)([]),e=(0,s.KR)({pacc_3d:{cep50:0,cep68:0,cep95:0,cep99:0,min:0,max:0,avg:0},pacc_h:{cep50:0,cep68:0,cep95:0,cep99:0,min:0,max:0,avg:0},pacc_v:{cep50:0,cep68:0,cep95:0,cep99:0,min:0,max:0,avg:0}}),M=(0,s.KR)({lat:0,lon:0}),y=(0,s.KR)(0),P=(0,s.KR)(0),E=(0,s.KR)(0),R=(0,s.KR)(0),N=(0,s.KR)();let w=null;const A=(0,s.KR)("");function K(l){const a=l.target.files[0];if(!a)return;A.value=a.name;const e=new FileReader;e.onload=()=>{const l=e.result.replace(/\0/g,"");I(l)},e.readAsText(a)}function S(l,a){const e=$(l.lat,l.lon,a.lat,a.lon),t=Math.abs(a.alt-l.alt);return Math.sqrt(e*e+t*t)}function X(l,a){return $(l.lat,l.lon,a.lat,a.lon)}function G(l,a){return Math.abs(a.alt-l.alt)}function W(l){const a=l.reduce(((l,a)=>l+a),0)/l.length,e=Math.sqrt(l.reduce(((l,e)=>l+Math.pow(e-a,2)),0)/l.length),t=l.filter((l=>Math.abs(l-a)<=3*e)),c=t.sort(((l,a)=>l-a)),n=c.length,s=Math.round(.5*n)-1,u=Math.round(.68*n)-1,d=Math.round(.95*n)-1,o=Math.round(.99*n)-1;return{cep50:c[s]||0,cep68:c[u]||0,cep95:c[d]||0,cep99:c[o]||0,min:c[0]||0,max:c[c.length-1]||0,avg:c.reduce(((l,a)=>l+a),0)/n||0}}function I(l){const c=l.split(/\r?\n/),n=[];let s=0;for(const a of c){let l="",e="",t="",c="";if(a.startsWith("$GNGGA")||a.startsWith("$GPGGA")){const n=a.split(",");l=n[2],e=n[3],t=n[4],c=n[5],s=isNaN(parseFloat(n[9]))?0:parseFloat(n[9])}else if(a.startsWith("$GNRMC")||a.startsWith("$GPRMC")){const n=a.split(",");l=n[3],e=n[4],t=n[5],c=n[6]}const u=V(l,e),d=V(t,c);isNaN(u)||isNaN(d)||n.push({lat:u,lon:d,alt:s})}if(0===n.length)return;const u=n.reduce(((l,a)=>l+a.lat),0)/n.length,d=n.reduce(((l,a)=>l+a.lon),0)/n.length,o=n.reduce(((l,a)=>l+a.alt),0)/n.length;M.value={lat:u,lon:d,alt:o},a.value=n.map((l=>({lat:l.lat,lon:l.lon,alt:l.alt,dist:$(u,d,l.lat,l.lon),dist3d:S(M.value,l),distH:X(M.value,l),distV:G(M.value,l)}))),e.value.pacc_3d=W(a.value.map((l=>l.dist3d))),e.value.pacc_h=W(a.value.map((l=>l.distH))),e.value.pacc_v=W(a.value.map((l=>l.distV))),y.value=e.value.pacc_3d.cep50,P.value=e.value.pacc_3d.cep68,E.value=e.value.pacc_3d.cep95,R.value=e.value.pacc_3d.cep99,a.value.length>0&&(0,t.dY)((()=>T()))}function V(l,a){const e=parseFloat(l.slice(0,"N"===a||"S"===a?2:3)),t=parseFloat(l.slice("N"===a||"S"===a?2:3));let c=e+t/60;return"S"!==a&&"W"!==a||(c*=-1),c}function $(l,a,e,t){const c=6371e3,n=l=>l*Math.PI/180,s=n(e-l),u=n(t-a),d=Math.sin(s/2)**2+Math.cos(n(l))*Math.cos(n(e))*Math.sin(u/2)**2;return 2*c*Math.atan2(Math.sqrt(d),Math.sqrt(1-d))}function T(){if(!N.value)return;w&&w.destroy();const l=a.value.map((l=>({x:$(M.value.lat,M.value.lon,M.value.lat,l.lon)*(l.lon>M.value.lon?1:-1),y:$(M.value.lat,M.value.lon,l.lat,M.value.lon)*(l.lat>M.value.lat?1:-1)}))),e=1.2*Math.max(...l.map((l=>Math.abs(l.x))),...l.map((l=>Math.abs(l.y))));w=new u.t1(N.value,{type:"scatter",data:{datasets:[{label:"Position Data",data:l,backgroundColor:"rgba(0, 0, 255, 0.6)",pointRadius:4}]},options:{aspectRatio:1,responsive:!0,scales:{x:{title:{display:!0,text:"East-West (meters)"},min:-e,max:e,grid:{color:"rgba(0, 0, 0, 0.1)",drawTicks:!0,drawOnChartArea:!0},ticks:{stepSize:e/5}},y:{title:{display:!0,text:"North-South (meters)"},min:-e,max:e,grid:{color:"rgba(0, 0, 0, 0.1)",drawTicks:!0,drawOnChartArea:!0},ticks:{stepSize:e/5}}},plugins:{title:{display:!0,text:"Position Scatter Plot with CEP Circles",padding:20},legend:{display:!0,position:"bottom"},cepCircles:{radii:[{value:y.value,label:"CEP50"},{value:P.value,label:"CEP68"},{value:E.value,label:"CEP95"},{value:R.value,label:"CEP99"}]}}},plugins:[{id:"cepCircles",beforeDatasetsDraw(l,a,e){const{ctx:t,scales:c}=l,n=c.x.getPixelForValue(0),s=c.y.getPixelForValue(0),u=e.radii||[],d=["red","blue","orange","green"];t.save(),u.forEach(((l,a)=>{const e=Math.abs(c.x.getPixelForValue(l.value)-n);t.beginPath(),t.arc(n,s,e,0,2*Math.PI),t.strokeStyle=d[a].replace("0.2","1.0"),t.lineWidth=2,t.stroke();const u=Math.PI/4,o=n+e*Math.cos(u),i=s-e*Math.sin(u);t.fillStyle=d[a].replace("0.2","1.0"),t.font="12px Arial",t.textAlign="left",t.fillText(`${l.label}: ${l.value.toFixed(2)}m`,o,i)})),t.restore()}}]})}return(l,s)=>((0,t.uX)(),(0,t.CE)("div",d,[s[6]||(s[6]=(0,t.Lk)("h1",{class:"section-title"},[(0,t.Lk)("span",{class:"section-icon"},"üìä"),(0,t.eW)(" NMEA CEP Í≥ÑÏÇ∞Í∏∞ ")],-1)),(0,t.Lk)("div",o,[(0,t.Lk)("label",i,[s[0]||(s[0]=(0,t.Lk)("span",{class:"file-upload-text"},"ÌååÏùº ÏÑ†ÌÉù",-1)),(0,t.Lk)("input",{type:"file",accept:".txt,.log",onChange:K,class:"file-input"},null,32)]),A.value?((0,t.uX)(),(0,t.CE)("span",v,(0,c.v_)(A.value),1)):(0,t.Q3)("",!0)]),s[7]||(s[7]=(0,t.Lk)("h2",{class:"font-semibold"},"üìä ÏúÑÏπò Îç∞Ïù¥ÌÑ∞",-1)),(0,t.bF)(n.eB,{name:"fade"},{default:(0,t.k6)((()=>[a.value.length?((0,t.uX)(),(0,t.CE)("div",r,[(0,t.Lk)("div",p,[(0,t.Lk)("table",h,[s[1]||(s[1]=(0,t.Lk)("thead",null,[(0,t.Lk)("tr",{class:"header-row"},[(0,t.Lk)("th",{class:"header-cell"},"#"),(0,t.Lk)("th",{class:"header-cell"},"ÏúÑÎèÑ"),(0,t.Lk)("th",{class:"header-cell"},"Í≤ΩÎèÑ"),(0,t.Lk)("th",{class:"header-cell"},"Í±∞Î¶¨ (m)")])],-1)),(0,t.Lk)("tbody",null,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(a.value,((l,a)=>((0,t.uX)(),(0,t.CE)("tr",{key:a,class:"data-row"},[(0,t.Lk)("td",k,(0,c.v_)(a+1),1),(0,t.Lk)("td",_,(0,c.v_)(l.lat.toFixed(6)),1),(0,t.Lk)("td",m,(0,c.v_)(l.lon.toFixed(6)),1),(0,t.Lk)("td",L,(0,c.v_)(l.dist.toFixed(3)),1)])))),128))])])])])):((0,t.uX)(),(0,t.CE)("div",x," ÌååÏùºÏùÑ ÏóÖÎ°úÎìúÌïòÎ©¥ Î∂ÑÏÑù Í≤∞Í≥ºÍ∞Ä Ïó¨Í∏∞Ïóê ÌëúÏãúÎê©ÎãàÎã§. "))])),_:1}),s[8]||(s[8]=(0,t.Lk)("h2",{class:"mt-6 font-semibold"},"üìà Í∑∏ÎûòÌîÑ ",-1)),(0,t.bF)(n.eB,{name:"fade"},{default:(0,t.k6)((()=>[a.value.length?((0,t.uX)(),(0,t.CE)("div",f,[(0,t.Lk)("canvas",{ref_key:"chartRef",ref:N},null,512)])):((0,t.uX)(),(0,t.CE)("div",g," ÌååÏùºÏùÑ ÏóÖÎ°úÎìúÌïòÎ©¥ Î∂ÑÏÑù Í≤∞Í≥ºÍ∞Ä Ïó¨Í∏∞Ïóê ÌëúÏãúÎê©ÎãàÎã§. "))])),_:1}),s[9]||(s[9]=(0,t.Lk)("h2",{class:"mt-6 font-semibold"},"üìå ÌÜµÍ≥Ñ",-1)),(0,t.bF)(n.eB,{name:"fade"},{default:(0,t.k6)((()=>[a.value.length?((0,t.uX)(),(0,t.CE)("div",C,[(0,t.Lk)("table",F,[s[5]||(s[5]=(0,t.Lk)("thead",null,[(0,t.Lk)("tr",null,[(0,t.Lk)("th",null,"ITEMS"),(0,t.Lk)("th",null,"CEP50"),(0,t.Lk)("th",null,"CEP68"),(0,t.Lk)("th",null,"CEP95"),(0,t.Lk)("th",null,"CEP99"),(0,t.Lk)("th",null,"ÏµúÏÜå Í±∞Î¶¨"),(0,t.Lk)("th",null,"ÏµúÎåÄ Í±∞Î¶¨"),(0,t.Lk)("th",null,"ÌèâÍ∑† Í±∞Î¶¨")])],-1)),(0,t.Lk)("tbody",null,[(0,t.Lk)("tr",null,[s[2]||(s[2]=(0,t.Lk)("td",null,"PACC_3D",-1)),(0,t.Lk)("td",null,(0,c.v_)(e.value.pacc_3d.cep50.toFixed(3))+" m",1),(0,t.Lk)("td",null,(0,c.v_)(e.value.pacc_3d.cep68.toFixed(3))+" m",1),(0,t.Lk)("td",null,(0,c.v_)(e.value.pacc_3d.cep95.toFixed(3))+" m",1),(0,t.Lk)("td",null,(0,c.v_)(e.value.pacc_3d.cep99.toFixed(3))+" m",1),(0,t.Lk)("td",null,(0,c.v_)(e.value.pacc_3d.min.toFixed(3))+" m",1),(0,t.Lk)("td",null,(0,c.v_)(e.value.pacc_3d.max.toFixed(3))+" m",1),(0,t.Lk)("td",null,(0,c.v_)(e.value.pacc_3d.avg.toFixed(3))+" m",1)]),(0,t.Lk)("tr",null,[s[3]||(s[3]=(0,t.Lk)("td",null,"PACC_H",-1)),(0,t.Lk)("td",null,(0,c.v_)(e.value.pacc_h.cep50.toFixed(3))+" m",1),(0,t.Lk)("td",null,(0,c.v_)(e.value.pacc_h.cep68.toFixed(3))+" m",1),(0,t.Lk)("td",null,(0,c.v_)(e.value.pacc_h.cep95.toFixed(3))+" m",1),(0,t.Lk)("td",null,(0,c.v_)(e.value.pacc_h.cep99.toFixed(3))+" m",1),(0,t.Lk)("td",null,(0,c.v_)(e.value.pacc_h.min.toFixed(3))+" m",1),(0,t.Lk)("td",null,(0,c.v_)(e.value.pacc_h.max.toFixed(3))+" m",1),(0,t.Lk)("td",null,(0,c.v_)(e.value.pacc_h.avg.toFixed(3))+" m",1)]),(0,t.Lk)("tr",null,[s[4]||(s[4]=(0,t.Lk)("td",null,"PACC_V",-1)),(0,t.Lk)("td",null,(0,c.v_)(e.value.pacc_v.cep50.toFixed(3))+" m",1),(0,t.Lk)("td",null,(0,c.v_)(e.value.pacc_v.cep68.toFixed(3))+" m",1),(0,t.Lk)("td",null,(0,c.v_)(e.value.pacc_v.cep95.toFixed(3))+" m",1),(0,t.Lk)("td",null,(0,c.v_)(e.value.pacc_v.cep99.toFixed(3))+" m",1),(0,t.Lk)("td",null,(0,c.v_)(e.value.pacc_v.min.toFixed(3))+" m",1),(0,t.Lk)("td",null,(0,c.v_)(e.value.pacc_v.max.toFixed(3))+" m",1),(0,t.Lk)("td",null,(0,c.v_)(e.value.pacc_v.avg.toFixed(3))+" m",1)])])])])):((0,t.uX)(),(0,t.CE)("div",b," ÌååÏùºÏùÑ ÏóÖÎ°úÎìúÌïòÎ©¥ Î∂ÑÏÑù Í≤∞Í≥ºÍ∞Ä Ïó¨Í∏∞Ïóê ÌëúÏãúÎê©ÎãàÎã§. "))])),_:1})]))}},y=e(1241);const P=(0,y.A)(M,[["__scopeId","data-v-2f279ee2"]]);var E=P}}]);
//# sourceMappingURL=297.523a2bdc.js.map
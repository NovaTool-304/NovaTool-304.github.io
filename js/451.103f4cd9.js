"use strict";(self["webpackChunknovatool_claude"]=self["webpackChunknovatool_claude"]||[]).push([[451],{9451:function(e,l,a){a.r(l),a.d(l,{default:function(){return _}});a(4114),a(6573),a(8100),a(7936),a(8111),a(2489),a(7642),a(8004),a(3853),a(5876),a(2475),a(5024),a(1698),a(7467),a(4732),a(9577),a(4603),a(7566),a(8721);var t=a(6768),n=a(4232),s=a(5130),u=a(144);const o={class:"binary-viewer"},i={class:"viewer-container"},r={class:"file-section"},v={class:"file-input-container"},c={class:"import-btn"},d={class:"file-info"},f={class:"file-export-container"},h={key:0,class:"export-btn"},p={key:0,class:"format-section"},k={key:1,class:"loading-section"},y={class:"progress-bar"},b={key:2,class:"control-section"},m={class:"left-controls"},L={class:"address"},g={class:"hex-values"},w=["onClick"],C={key:0,class:"ascii-values"},x=["onClick"],R=1048576,E=16,K=10485760;var X={__name:"BinaryViewer",setup(e){const l=(0,u.KR)(null),a=(0,u.KR)(null),X=(0,u.KR)(""),M=(0,u.KR)(""),I=(0,u.KR)(!1),_=(0,u.KR)(0),B=(0,u.KR)(!0),U=(0,u.KR)(16),z=(0,u.KR)(new Set),W=(0,u.KR)(0),A=(0,u.KR)(null),S=(0,u.KR)(new Map),F=(0,u.KR)([]),$=(0,u.KR)(null),V=(0,u.KR)("binary"),Q=(0,u.KR)(null),T=(0,u.KR)(!1),H=(0,t.EW)((()=>F.value)),O=(0,t.EW)((()=>{if(!A.value&&!Q.value)return 0;if("hex"===V.value&&Q.value){const e=Math.floor(Q.value.length/U.value),l=Q.value.length%U.value>0;return e+(l?1:0)}const e=Math.floor(A.value.size/U.value),l=A.value.size%U.value>0;return e+(l?1:0)})),P=(0,t.EW)((()=>O.value*E)),j=(0,t.EW)((()=>Math.max(0,W.value)*E)),Y=e=>e.toString(16).padStart(8,"0").toUpperCase(),G=e=>void 0===e?"  ":e.toString(16).padStart(2,"0").toUpperCase(),N=e=>void 0===e?" ":e>=32&&e<=126?String.fromCharCode(e):".",q=e=>z.value.has(e),D=e=>{const l=["B","KB","MB","GB"];let a=e,t=0;while(a>=1024&&t<l.length-1)a/=1024,t++;return`${a.toFixed(1)} ${l[t]}`},J=e=>{const l=e.split(/\r?\n/).filter((e=>e.trim().length>0)),a=new Uint8Array(16777216);let t=0,n=0;for(const s of l){if(":"!==s[0])continue;const e=parseInt(s.substr(1,2),16),l=parseInt(s.substr(3,4),16),u=parseInt(s.substr(7,2),16);switch(u){case 0:for(let u=0;u<e;u++){const e=parseInt(s.substr(9+2*u,2),16),o=n+l+u;a[o]=e,t=Math.max(t,o)}break;case 1:break;case 2:n=16*parseInt(s.substr(9,4),16);break;case 4:n=65536*parseInt(s.substr(9,4),16);break}}return a.slice(0,t+1)},Z=()=>{if(!Q.value)return;const e=new Blob([Q.value],{type:"application/octet-stream"}),l=URL.createObjectURL(e),a=document.createElement("a");a.href=l;const t=X.value,n=t.toLowerCase().endsWith(".hex")?t.slice(0,-4):t;a.download=`${n}.bin`,document.body.appendChild(a),a.click(),setTimeout((()=>{document.body.removeChild(a),URL.revokeObjectURL(l)}),0)},ee=async(e,l)=>{const a=[];if("hex"===V.value&&Q.value)for(let t=e;t<l;t++){const e=t*U.value;if(e>=Q.value.length)break;const l=Q.value.length-e,n=Math.min(U.value,l),s=Array.from(Q.value.slice(e,e+n));a.push({index:t,offset:e,bytes:s})}else{const t=e*U.value,n=Math.min(l*U.value,A.value.size);await ae(t,n);const s=Math.floor(A.value.size/U.value),u=A.value.size%U.value>0,o=s+(u?0:-1);for(let i=e;i<=o&&i<l;i++){const e=i*U.value;if(e>=A.value.size)break;const l=A.value.size-e,t=Math.min(U.value,l),n=await se(e,t);a.push({index:i,offset:e,bytes:n})}}return a},le=e=>Math.floor(e/R)*R,ae=async(e,l)=>{const a=le(e),t=le(l);for(let n=a;n<=t;n+=R)S.value.has(n)||await ne(n);while(te()>K){const e=S.value.keys().next().value;S.value.delete(e)}},te=()=>{let e=0;for(const l of S.value.values())e+=l.length;return e},ne=async e=>{const l=A.value.slice(e,Math.min(e+R,A.value.size)),a=await ie(l);S.value.set(e,new Uint8Array(a))},se=async(e,l)=>{const a=le(e),t=S.value.get(a);if(!t)return new Array(l).fill(void 0);const n=e-a,s=t.slice(n,n+l);return e+s.length>A.value.size&&(s.length=A.value.size-e),Array.from(s)},ue=async e=>{const n=e.target.files[0];if(n){if(X.value=n.name,M.value=D(n.size),A.value=n,S.value.clear(),W.value=0,I.value=!0,_.value=0,T.value=n.name.toLowerCase().endsWith(".hex"),T.value){V.value="hex";try{const e=await oe(n);Q.value=J(e),M.value=D(Q.value.length)}catch(s){console.error("인텔 헥사 파일 파싱 오류:",s)}}else V.value="binary";try{a.value=!0,await(0,t.dY)(),l.value&&(console.debug("Registering scroll event handler"),l.value.addEventListener("scroll",ve)),await re()}catch(s){console.error("파일 로딩 오류:",s)}finally{I.value=!1}}},oe=e=>new Promise(((l,a)=>{const t=new FileReader;t.onload=e=>l(e.target.result),t.onerror=a,t.readAsText(e)})),ie=e=>new Promise(((l,a)=>{const t=new FileReader;t.onload=e=>l(e.target.result),t.onerror=a,t.readAsArrayBuffer(e)})),re=async()=>{if(!A.value)return;const e=l.value?.clientHeight||0,a=Math.ceil(e/E)+10,t=Math.max(0,W.value-5),n=Math.min(O.value,W.value+a+5),s=await ee(t,n);F.value=s},ve=()=>{if(!l.value||!A.value)return;const e=Math.floor(l.value.scrollTop/E);e!==W.value&&(W.value=e,re())},ce=e=>{$.value=$.value===e?null:e},de=e=>$.value===e;return(0,t.wB)(V,(async e=>{if(A.value&&T.value){if("hex"===e&&!Q.value){I.value=!0;try{const e=await oe(A.value);Q.value=J(e),M.value=D(Q.value.length)}catch(l){console.error("인텔 헥사 파일 파싱 오류:",l)}finally{I.value=!1}}re()}})),(0,t.wB)(U,(e=>{document.documentElement.style.setProperty("--bytes-per-line",e.toString()),re()}),{immediate:!0}),(0,t.sV)((()=>{console.debug("Component mounted")})),(0,t.hi)((()=>{l.value&&(console.debug("Removing scroll event handler"),l.value.removeEventListener("scroll",ve))})),(e,u)=>((0,t.uX)(),(0,t.CE)("div",o,[(0,t.Lk)("div",i,[(0,t.Lk)("div",r,[(0,t.Lk)("div",v,[(0,t.Lk)("label",c,[(0,t.Lk)("input",{type:"file",accept:"*/*",onChange:ue,class:"file-input"},null,32),u[4]||(u[4]=(0,t.Lk)("span",{class:"material-icons"},"file_open",-1)),u[5]||(u[5]=(0,t.eW)(" Open File "))]),(0,t.Lk)("span",d,(0,n.v_)(X.value?`${X.value} (${M.value})`:"Intel HEX file automatically convert"),1)]),(0,t.Lk)("div",f,[T.value&&Q.value?((0,t.uX)(),(0,t.CE)("label",h,[(0,t.Lk)("input",{onClick:Z,class:"file-input"}),u[6]||(u[6]=(0,t.Lk)("span",{class:"material-icons"},"file_download",-1)),u[7]||(u[7]=(0,t.eW)(" Export BIN "))])):(0,t.Q3)("",!0)])]),T.value?((0,t.uX)(),(0,t.CE)("div",p,[(0,t.Lk)("label",null,[(0,t.bo)((0,t.Lk)("input",{type:"radio","onUpdate:modelValue":u[0]||(u[0]=e=>V.value=e),value:"binary"},null,512),[[s.XL,V.value]]),u[8]||(u[8]=(0,t.eW)(" Binary "))]),(0,t.Lk)("label",null,[(0,t.bo)((0,t.Lk)("input",{type:"radio","onUpdate:modelValue":u[1]||(u[1]=e=>V.value=e),value:"hex"},null,512),[[s.XL,V.value]]),u[9]||(u[9]=(0,t.eW)(" Intel HEX "))])])):(0,t.Q3)("",!0),I.value?((0,t.uX)(),(0,t.CE)("div",k,[(0,t.Lk)("div",y,[(0,t.Lk)("div",{class:"progress",style:(0,n.Tr)({width:`${_.value}%`})},null,4)]),(0,t.Lk)("span",null,"File loading... "+(0,n.v_)(_.value)+"%",1)])):(0,t.Q3)("",!0),a.value?((0,t.uX)(),(0,t.CE)("div",b,[(0,t.Lk)("div",m,[(0,t.Lk)("label",null,[(0,t.bo)((0,t.Lk)("input",{type:"checkbox","onUpdate:modelValue":u[2]||(u[2]=e=>B.value=e)},null,512),[[s.lH,B.value]]),u[10]||(u[10]=(0,t.eW)(" Show ASCII "))]),(0,t.Lk)("label",null,[u[12]||(u[12]=(0,t.Lk)("span",{style:{"padding-right":"10px"}},"Bytes/Line",-1)),(0,t.bo)((0,t.Lk)("select",{"onUpdate:modelValue":u[3]||(u[3]=e=>U.value=e)},u[11]||(u[11]=[(0,t.Lk)("option",{value:8},"8",-1),(0,t.Lk)("option",{value:16},"16",-1)]),512),[[s.u1,U.value]])])]),u[13]||(u[13]=(0,t.Lk)("div",{class:"right-controls"},null,-1))])):(0,t.Q3)("",!0),a.value?((0,t.uX)(),(0,t.CE)("div",{key:3,class:"hex-view",ref_key:"hexView",ref:l},[(0,t.Lk)("div",{class:"hex-content",style:(0,n.Tr)({height:`${P.value}px`})},[(0,t.Lk)("div",{class:"viewport",style:(0,n.Tr)({transform:`translateY(${j.value}px)`})},[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(H.value,(e=>((0,t.uX)(),(0,t.CE)("div",{key:e.index,class:"hex-line"},[(0,t.Lk)("div",L,(0,n.v_)(Y(e.offset)),1),(0,t.Lk)("div",g,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(e.bytes,((l,a)=>((0,t.uX)(),(0,t.CE)("span",{key:a,class:(0,n.C4)(["hex-byte",{highlighted:q(e.offset+a),selected:de(e.offset+a)}]),onClick:l=>ce(e.offset+a)},(0,n.v_)(G(l)),11,w)))),128))]),B.value?((0,t.uX)(),(0,t.CE)("div",C,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(e.bytes,((l,a)=>((0,t.uX)(),(0,t.CE)("span",{key:a,class:(0,n.C4)({highlighted:q(e.offset+a),selected:de(e.offset+a)}),onClick:l=>ce(e.offset+a)},(0,n.v_)(N(l)),11,x)))),128))])):(0,t.Q3)("",!0)])))),128))],4)],4)],512)):(0,t.Q3)("",!0)])]))}},M=a(1241);const I=(0,M.A)(X,[["__scopeId","data-v-ab27bf62"]]);var _=I}}]);
//# sourceMappingURL=451.103f4cd9.js.map
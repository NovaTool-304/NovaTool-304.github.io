"use strict";(self["webpackChunknovatool_claude"]=self["webpackChunknovatool_claude"]||[]).push([[19],{4019:function(a,e,t){t.r(e),t.d(e,{default:function(){return T}});t(4114),t(8111),t(2489),t(7588),t(1701),t(8237);var l=t(6768),s=t(4232),c=t(144),r=t(6912);const o={class:"p-4 space-y-4"},d={key:0},p={class:"table-auto border border-collapse w-full text-sm"},n={class:"border px-2"},u={class:"border px-2"},i={class:"border px-2"},v={class:"border px-2"},x={class:"mt-6 font-semibold"},h={class:"table-auto border border-collapse text-sm"},b={class:"border px-2"},k={class:"border px-2"},_={class:"border px-2"},m={class:"border px-2"},L={class:"border px-2"},g={class:"border px-2"},f={class:"border px-2"},F={class:"border px-2"},C={class:"border px-2"},P={class:"border px-2"},M={class:"border px-2"},E={class:"border px-2"},y={class:"border px-2"},N={class:"border px-2"},R={class:"border px-2"},w={class:"border px-2"},A={class:"border px-2"},S={class:"border px-2"},K={class:"border px-2"},G={class:"border px-2"},W={class:"border px-2"};var I={__name:"NmeaCEPCalc",setup(a){r.t1.register(r.Pz,r.kc,r.FN,r.hE);const e=(0,c.KR)([]),t=(0,c.KR)({pacc_3d:{cep50:0,cep68:0,cep95:0,cep99:0,min:0,max:0,avg:0},pacc_h:{cep50:0,cep68:0,cep95:0,cep99:0,min:0,max:0,avg:0},pacc_v:{cep50:0,cep68:0,cep95:0,cep99:0,min:0,max:0,avg:0}}),I=(0,c.KR)({lat:0,lon:0}),V=(0,c.KR)(0),$=(0,c.KR)(0),T=(0,c.KR)(0),q=(0,c.KR)(0),D=(0,c.KR)();let X=null;function z(a){const e=a.target.files[0];if(!e)return;const t=new FileReader;t.onload=()=>j(t.result),t.readAsText(e)}function H(a,e){const t=J(a.lat,a.lon,e.lat,e.lon),l=Math.abs(e.alt-a.alt);return Math.sqrt(t*t+l*l)}function O(a,e){return J(a.lat,a.lon,e.lat,e.lon)}function Q(a,e){return Math.abs(e.alt-a.alt)}function Y(a){const e=a.reduce(((a,e)=>a+e),0)/a.length,t=Math.sqrt(a.reduce(((a,t)=>a+Math.pow(t-e,2)),0)/a.length),l=a.filter((a=>Math.abs(a-e)<=3*t)),s=l.sort(((a,e)=>a-e)),c=s.length,r=Math.round(.5*c)-1,o=Math.round(.68*c)-1,d=Math.round(.95*c)-1,p=Math.round(.99*c)-1;return{cep50:s[r]||0,cep68:s[o]||0,cep95:s[d]||0,cep99:s[p]||0,min:s[0]||0,max:s[s.length-1]||0,avg:s.reduce(((a,e)=>a+e),0)/c||0}}function j(a){const s=a.split(/\r?\n/),c=[];let r=0;for(const e of s){let a="",t="",l="",s="";if(e.startsWith("$GNGGA")||e.startsWith("$GPGGA")){const c=e.split(",");a=c[2],t=c[3],l=c[4],s=c[5],r=isNaN(parseFloat(c[9]))?0:parseFloat(c[9])}else if(e.startsWith("$GNRMC")||e.startsWith("$GPRMC")){const c=e.split(",");a=c[3],t=c[4],l=c[5],s=c[6]}const o=B(a,t),d=B(l,s);isNaN(o)||isNaN(d)||c.push({lat:o,lon:d,alt:r})}if(0===c.length)return;const o=c.reduce(((a,e)=>a+e.lat),0)/c.length,d=c.reduce(((a,e)=>a+e.lon),0)/c.length,p=c.reduce(((a,e)=>a+e.alt),0)/c.length;I.value={lat:o,lon:d,alt:p},e.value=c.map((a=>({lat:a.lat,lon:a.lon,alt:a.alt,dist:J(o,d,a.lat,a.lon),dist3d:H(I.value,a),distH:O(I.value,a),distV:Q(I.value,a)}))),t.value.pacc_3d=Y(e.value.map((a=>a.dist3d))),t.value.pacc_h=Y(e.value.map((a=>a.distH))),t.value.pacc_v=Y(e.value.map((a=>a.distV))),V.value=t.value.pacc_3d.cep50,$.value=t.value.pacc_3d.cep68,T.value=t.value.pacc_3d.cep95,q.value=t.value.pacc_3d.cep99,e.value.length>0&&(0,l.dY)((()=>U()))}function B(a,e){const t=parseFloat(a.slice(0,"N"===e||"S"===e?2:3)),l=parseFloat(a.slice("N"===e||"S"===e?2:3));let s=t+l/60;return"S"!==e&&"W"!==e||(s*=-1),s}function J(a,e,t,l){const s=6371e3,c=a=>a*Math.PI/180,r=c(t-a),o=c(l-e),d=Math.sin(r/2)**2+Math.cos(c(a))*Math.cos(c(t))*Math.sin(o/2)**2;return 2*s*Math.atan2(Math.sqrt(d),Math.sqrt(1-d))}function U(){if(!D.value)return;X&&X.destroy();const a=e.value.map((a=>({x:J(I.value.lat,I.value.lon,I.value.lat,a.lon)*(a.lon>I.value.lon?1:-1),y:J(I.value.lat,I.value.lon,a.lat,I.value.lon)*(a.lat>I.value.lat?1:-1)}))),t=1.2*Math.max(...a.map((a=>Math.abs(a.x))),...a.map((a=>Math.abs(a.y))));X=new r.t1(D.value,{type:"scatter",data:{datasets:[{label:"Position Data",data:a,backgroundColor:"rgba(0, 0, 255, 0.6)",pointRadius:4}]},options:{aspectRatio:1,responsive:!0,scales:{x:{title:{display:!0,text:"East-West (meters)"},min:-t,max:t,grid:{color:"rgba(0, 0, 0, 0.1)",drawTicks:!0,drawOnChartArea:!0},ticks:{stepSize:t/5}},y:{title:{display:!0,text:"North-South (meters)"},min:-t,max:t,grid:{color:"rgba(0, 0, 0, 0.1)",drawTicks:!0,drawOnChartArea:!0},ticks:{stepSize:t/5}}},plugins:{title:{display:!0,text:"Position Scatter Plot with CEP Circles",padding:20},legend:{display:!0,position:"bottom"},cepCircles:{radii:[{value:V.value,label:"CEP50"},{value:$.value,label:"CEP68"},{value:T.value,label:"CEP95"},{value:q.value,label:"CEP99"}]}}},plugins:[{id:"cepCircles",beforeDatasetsDraw(a,e,t){const{ctx:l,scales:s}=a,c=s.x.getPixelForValue(0),r=s.y.getPixelForValue(0),o=t.radii||[],d=["red","blue","orange","green"];l.save(),o.forEach(((a,e)=>{const t=Math.abs(s.x.getPixelForValue(a.value)-c);l.beginPath(),l.arc(c,r,t,0,2*Math.PI),l.strokeStyle=d[e].replace("0.2","1.0"),l.lineWidth=2,l.stroke();const o=Math.PI/4,p=c+t*Math.cos(o),n=r-t*Math.sin(o);l.fillStyle=d[e].replace("0.2","1.0"),l.font="12px Arial",l.textAlign="left",l.fillText(`${a.label}: ${a.value.toFixed(2)}m`,p,n)})),l.restore()}}]})}return(a,c)=>((0,l.uX)(),(0,l.CE)("div",o,[c[7]||(c[7]=(0,l.Lk)("h1",{class:"text-xl font-bold"},"NMEA CEP Í≥ÑÏÇ∞Í∏∞",-1)),(0,l.Lk)("input",{type:"file",accept:".txt",onChange:z,class:"mb-4"},null,32),e.value.length?((0,l.uX)(),(0,l.CE)("div",d,[c[5]||(c[5]=(0,l.Lk)("h2",{class:"font-semibold"},"üìä ÏúÑÏπò Îç∞Ïù¥ÌÑ∞",-1)),(0,l.Lk)("table",p,[c[0]||(c[0]=(0,l.Lk)("thead",{class:"bg-gray-100"},[(0,l.Lk)("tr",null,[(0,l.Lk)("th",{class:"border px-2"},"#"),(0,l.Lk)("th",{class:"border px-2"},"ÏúÑÎèÑ"),(0,l.Lk)("th",{class:"border px-2"},"Í≤ΩÎèÑ"),(0,l.Lk)("th",{class:"border px-2"},"Í±∞Î¶¨ (m)")])],-1)),(0,l.Lk)("tbody",null,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.value,((a,e)=>((0,l.uX)(),(0,l.CE)("tr",{key:e},[(0,l.Lk)("td",n,(0,s.v_)(e+1),1),(0,l.Lk)("td",u,(0,s.v_)(a.lat.toFixed(6)),1),(0,l.Lk)("td",i,(0,s.v_)(a.lon.toFixed(6)),1),(0,l.Lk)("td",v,(0,s.v_)(a.dist.toFixed(3)),1)])))),128))])]),(0,l.Lk)("h2",x," üìà Í∑∏ÎûòÌîÑ (CEP50="+(0,s.v_)(V.value.toFixed(3))+"m, CEP68="+(0,s.v_)($.value.toFixed(3))+"m, CEP95="+(0,s.v_)(T.value.toFixed(3))+"m, CEP99="+(0,s.v_)(q.value.toFixed(3))+"m) ",1),(0,l.Lk)("canvas",{ref_key:"chartRef",ref:D},null,512),c[6]||(c[6]=(0,l.Lk)("h2",{class:"mt-6 font-semibold"},"üìå ÌÜµÍ≥Ñ",-1)),(0,l.Lk)("table",h,[c[4]||(c[4]=(0,l.Lk)("thead",{class:"bg-gray-100"},[(0,l.Lk)("tr",null,[(0,l.Lk)("th",{class:"border px-2"},"ITEMS"),(0,l.Lk)("th",{class:"border px-2"},"CEP50"),(0,l.Lk)("th",{class:"border px-2"},"CEP68"),(0,l.Lk)("th",{class:"border px-2"},"CEP95"),(0,l.Lk)("th",{class:"border px-2"},"CEP99"),(0,l.Lk)("th",{class:"border px-2"},"ÏµúÏÜå Í±∞Î¶¨"),(0,l.Lk)("th",{class:"border px-2"},"ÏµúÎåÄ Í±∞Î¶¨"),(0,l.Lk)("th",{class:"border px-2"},"ÌèâÍ∑† Í±∞Î¶¨")])],-1)),(0,l.Lk)("tbody",null,[(0,l.Lk)("tr",null,[c[1]||(c[1]=(0,l.Lk)("td",{class:"border px-2"},"PACC_3D",-1)),(0,l.Lk)("td",b,(0,s.v_)(t.value.pacc_3d.cep50.toFixed(3))+" m",1),(0,l.Lk)("td",k,(0,s.v_)(t.value.pacc_3d.cep68.toFixed(3))+" m",1),(0,l.Lk)("td",_,(0,s.v_)(t.value.pacc_3d.cep95.toFixed(3))+" m",1),(0,l.Lk)("td",m,(0,s.v_)(t.value.pacc_3d.cep99.toFixed(3))+" m",1),(0,l.Lk)("td",L,(0,s.v_)(t.value.pacc_3d.min.toFixed(3))+" m",1),(0,l.Lk)("td",g,(0,s.v_)(t.value.pacc_3d.max.toFixed(3))+" m",1),(0,l.Lk)("td",f,(0,s.v_)(t.value.pacc_3d.avg.toFixed(3))+" m",1)]),(0,l.Lk)("tr",null,[c[2]||(c[2]=(0,l.Lk)("td",{class:"border px-2"},"PACC_H",-1)),(0,l.Lk)("td",F,(0,s.v_)(t.value.pacc_h.cep50.toFixed(3))+" m",1),(0,l.Lk)("td",C,(0,s.v_)(t.value.pacc_h.cep68.toFixed(3))+" m",1),(0,l.Lk)("td",P,(0,s.v_)(t.value.pacc_h.cep95.toFixed(3))+" m",1),(0,l.Lk)("td",M,(0,s.v_)(t.value.pacc_h.cep99.toFixed(3))+" m",1),(0,l.Lk)("td",E,(0,s.v_)(t.value.pacc_h.min.toFixed(3))+" m",1),(0,l.Lk)("td",y,(0,s.v_)(t.value.pacc_h.max.toFixed(3))+" m",1),(0,l.Lk)("td",N,(0,s.v_)(t.value.pacc_h.avg.toFixed(3))+" m",1)]),(0,l.Lk)("tr",null,[c[3]||(c[3]=(0,l.Lk)("td",{class:"border px-2"},"PACC_V",-1)),(0,l.Lk)("td",R,(0,s.v_)(t.value.pacc_v.cep50.toFixed(3))+" m",1),(0,l.Lk)("td",w,(0,s.v_)(t.value.pacc_v.cep68.toFixed(3))+" m",1),(0,l.Lk)("td",A,(0,s.v_)(t.value.pacc_v.cep95.toFixed(3))+" m",1),(0,l.Lk)("td",S,(0,s.v_)(t.value.pacc_v.cep99.toFixed(3))+" m",1),(0,l.Lk)("td",K,(0,s.v_)(t.value.pacc_v.min.toFixed(3))+" m",1),(0,l.Lk)("td",G,(0,s.v_)(t.value.pacc_v.max.toFixed(3))+" m",1),(0,l.Lk)("td",W,(0,s.v_)(t.value.pacc_v.avg.toFixed(3))+" m",1)])])])])):(0,l.Q3)("",!0)]))}},V=t(1241);const $=(0,V.A)(I,[["__scopeId","data-v-7cac3f01"]]);var T=$}}]);
//# sourceMappingURL=19.53d6361b.js.map
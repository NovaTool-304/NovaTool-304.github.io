"use strict";(self["webpackChunknovatool_claude"]=self["webpackChunknovatool_claude"]||[]).push([[139],{9139:function(e,t,l){l.r(t),l.d(t,{default:function(){return rl}});l(4114),l(8111),l(2489),l(7588),l(1701),l(8237);var a=l(6768),o=l(5130),n=l(4232),r=l(144),s=l(6912);l(1148),l(116),l(3579);const i=(e,t)=>{for(const l of Object.keys(t))e.on(l,t[l])},u=e=>{for(const t of Object.keys(e)){const l=e[t];l&&c(l.cancel)&&l.cancel()}},d=e=>e&&"function"==typeof e.charAt?e.charAt(0).toUpperCase()+e.slice(1):e,c=e=>"function"==typeof e,p=(e,t,l)=>{for(const o in l){const n="set"+d(o);e[n]?(0,a.wB)((()=>l[o]),((t,l)=>{e[n](t,l)})):t[n]&&(0,a.wB)((()=>l[o]),(e=>{t[n](e)}))}},v=(e,t,l={})=>{const a={...l};for(const o in e){const l=t[o],n=e[o];l&&(l&&!0===l.custom||void 0!==n&&(a[o]=n))}return a},y=e=>{const t={},l={};for(const a in e)if(a.startsWith("on")&&!a.startsWith("onUpdate")&&"onReady"!==a){const l=a.slice(2).toLocaleLowerCase();t[l]=e[a]}else l[a]=e[a];return{listeners:t,attrs:l}},m=async e=>{const t=await Promise.all([l.e(249).then(l.t.bind(l,8249,17)),l.e(24).then(l.t.bind(l,7024,17)),l.e(71).then(l.t.bind(l,1071,17))]);delete e.Default.prototype._getIconUrl,e.Default.mergeOptions({iconRetinaUrl:t[0].default,iconUrl:t[1].default,shadowUrl:t[2].default})},f=e=>{const t=(0,r.KR)(((...t)=>console.warn(`Method ${e} has been invoked without being replaced`))),l=(...e)=>t.value(...e);return l.wrapped=t,(0,a.Gt)(e,l),l},b=(e,t)=>e.wrapped.value=t,h="object"==typeof self&&self.self===self&&self||"object"==typeof l.g&&l.g.global===l.g&&l.g||globalThis,g=e=>{const t=(0,a.WQ)(e);if(void 0===t)throw new Error(`Attempt to inject ${e.description} before it was provided.`);return t},L=(Symbol.toStringTag,Symbol("useGlobalLeaflet")),_=Symbol("addLayer"),S=Symbol("removeLayer"),k=Symbol("registerControl"),O=Symbol("registerLayerControl"),P=Symbol("canSetParentHtml"),j=Symbol("setParentHtml"),C=Symbol("setIcon"),x=Symbol("bindPopup"),R=Symbol("bindTooltip"),M=Symbol("unbindPopup"),T=Symbol("unbindTooltip"),w=(Symbol.toStringTag,{options:{type:Object,default:()=>({}),custom:!0}}),F=e=>({options:e.options,methods:{}}),I=Object.freeze(Object.defineProperty({__proto__:null,componentProps:w,setupComponent:F},Symbol.toStringTag,{value:"Module"})),B={...w,pane:{type:String},attribution:{type:String},name:{type:String,custom:!0},layerType:{type:String,custom:!0},visible:{type:Boolean,custom:!0,default:!0}},A=(e,t,l)=>{const o=g(_),n=g(S),{options:r,methods:s}=F(e),i=v(e,B,r),u=()=>o({leafletObject:t.value}),d=()=>n({leafletObject:t.value}),p={...s,setAttribution(l){d(),t.value.options.attribution=l,e.visible&&u()},setName(){d(),e.visible&&u()},setLayerType(){d(),e.visible&&u()},setVisible(e){t.value&&(e?u():d())},bindPopup(e){t.value&&c(t.value.bindPopup)?t.value.bindPopup(e):console.warn("Attempt to bind popup before bindPopup method available on layer.")},bindTooltip(e){t.value&&c(t.value.bindTooltip)?t.value.bindTooltip(e):console.warn("Attempt to bind tooltip before bindTooltip method available on layer.")},unbindTooltip(){t.value&&(c(t.value.closeTooltip)&&t.value.closeTooltip(),c(t.value.unbindTooltip)&&t.value.unbindTooltip())},unbindPopup(){t.value&&(c(t.value.closePopup)&&t.value.closePopup(),c(t.value.unbindPopup)&&t.value.unbindPopup())},updateVisibleProp(e){l.emit("update:visible",e)}};return(0,a.Gt)(x,p.bindPopup),(0,a.Gt)(R,p.bindTooltip),(0,a.Gt)(M,p.unbindPopup),(0,a.Gt)(T,p.unbindTooltip),(0,a.hi)((()=>{p.unbindPopup(),p.unbindTooltip(),d()})),{options:i,methods:p}},G=(e,t)=>{if(e&&t.default)return(0,a.h)("div",{style:{display:"none"}},t.default())},E=Object.freeze(Object.defineProperty({__proto__:null,layerProps:B,render:G,setupLayer:A},Symbol.toStringTag,{value:"Module"})),K={...B,interactive:{type:Boolean,default:void 0},bubblingMouseEvents:{type:Boolean,default:void 0}},W=(e,t,l)=>{const{options:a,methods:o}=A(e,t,l);return{options:v(e,K,a),methods:o}},N=Object.freeze(Object.defineProperty({__proto__:null,interactiveLayerProps:K,setupInteractiveLayer:W},Symbol.toStringTag,{value:"Module"})),z={...K,stroke:{type:Boolean,default:void 0},color:{type:String},weight:{type:Number},opacity:{type:Number},lineCap:{type:String},lineJoin:{type:String},dashArray:{type:String},dashOffset:{type:String},fill:{type:Boolean,default:void 0},fillColor:{type:String},fillOpacity:{type:Number},fillRule:{type:String},className:{type:String}},V=(e,t,l)=>{const{options:o,methods:n}=W(e,t,l),r=v(e,z,o),s=g(S),i={...n,setStroke(e){t.value.setStyle({stroke:e})},setColor(e){t.value.setStyle({color:e})},setWeight(e){t.value.setStyle({weight:e})},setOpacity(e){t.value.setStyle({opacity:e})},setLineCap(e){t.value.setStyle({lineCap:e})},setLineJoin(e){t.value.setStyle({lineJoin:e})},setDashArray(e){t.value.setStyle({dashArray:e})},setDashOffset(e){t.value.setStyle({dashOffset:e})},setFill(e){t.value.setStyle({fill:e})},setFillColor(e){t.value.setStyle({fillColor:e})},setFillOpacity(e){t.value.setStyle({fillOpacity:e})},setFillRule(e){t.value.setStyle({fillRule:e})},setClassName(e){t.value.setStyle({className:e})}};return(0,a.xo)((()=>{s({leafletObject:t.value})})),{options:r,methods:i}},$=Object.freeze(Object.defineProperty({__proto__:null,pathProps:z,setupPath:V},Symbol.toStringTag,{value:"Module"})),Q={...z,radius:{type:Number},latLng:{type:[Object,Array],required:!0,custom:!0}},X=(e,t,l)=>{const{options:a,methods:o}=V(e,t,l),n=v(e,Q,a),r={...o,setRadius(e){t.value.setRadius(e)},setLatLng(e){t.value.setLatLng(e)}};return{options:n,methods:r}},Y=Object.freeze(Object.defineProperty({__proto__:null,circleMarkerProps:Q,setupCircleMarker:X},Symbol.toStringTag,{value:"Module"})),U={...Q,radius:{type:Number}},D=(e,t,l)=>{const{options:a,methods:o}=X(e,t,l),n=v(e,U,a),r={...o};return{options:n,methods:r}},H=Object.freeze(Object.defineProperty({__proto__:null,circleProps:U,setupCircle:D},Symbol.toStringTag,{value:"Module"})),q=((0,a.pM)({name:"LCircle",props:U,setup(e,t){const o=(0,r.KR)(),n=(0,r.KR)(!1),s=(0,a.WQ)(L),i=g(_),{options:u,methods:d}=D(e,o,t);return(0,a.sV)((async()=>{const{circle:c}=s?h.L:await Promise.all([l.e(700),l.e(791)]).then(l.bind(l,4791));o.value=(0,r.IG)(c(e.latLng,u));const{listeners:v}=y(t.attrs);o.value.on(v),p(d,o.value,e),i({...e,...d,leafletObject:o.value}),n.value=!0,(0,a.dY)((()=>t.emit("ready",o.value)))})),{ready:n,leafletObject:o}},render(){return G(this.ready,this.$slots)}}),(0,a.pM)({name:"LCircleMarker",props:Q,setup(e,t){const o=(0,r.KR)(),n=(0,r.KR)(!1),s=(0,a.WQ)(L),i=g(_),{options:u,methods:d}=X(e,o,t);return(0,a.sV)((async()=>{const{circleMarker:c}=s?h.L:await Promise.all([l.e(700),l.e(791)]).then(l.bind(l,4791));o.value=(0,r.IG)(c(e.latLng,u));const{listeners:v}=y(t.attrs);o.value.on(v),p(d,o.value,e),i({...e,...d,leafletObject:o.value}),n.value=!0,(0,a.dY)((()=>t.emit("ready",o.value)))})),{ready:n,leafletObject:o}},render(){return G(this.ready,this.$slots)}})),Z={...w,position:{type:String}},J=(e,t)=>{const{options:l,methods:o}=F(e),n=v(e,Z,l),r={...o,setPosition(e){t.value&&t.value.setPosition(e)}};return(0,a.hi)((()=>{t.value&&t.value.remove()})),{options:n,methods:r}},ee=e=>e.default?(0,a.h)("div",{ref:"root"},e.default()):null,te=Object.freeze(Object.defineProperty({__proto__:null,controlProps:Z,renderLControl:ee,setupControl:J},Symbol.toStringTag,{value:"Module"})),le=((0,a.pM)({name:"LControl",props:{...Z,disableClickPropagation:{type:Boolean,custom:!0,default:!0},disableScrollPropagation:{type:Boolean,custom:!0,default:!1}},setup(e,t){const o=(0,r.KR)(),n=(0,r.KR)(),s=(0,a.WQ)(L),i=g(k),{options:u,methods:d}=J(e,o);return(0,a.sV)((async()=>{const{Control:c,DomEvent:v}=s?h.L:await Promise.all([l.e(700),l.e(791)]).then(l.bind(l,4791)),y=c.extend({onAdd(){return n.value}});o.value=(0,r.IG)(new y(u)),p(d,o.value,e),i({leafletObject:o.value}),e.disableClickPropagation&&n.value&&v.disableClickPropagation(n.value),e.disableScrollPropagation&&n.value&&v.disableScrollPropagation(n.value),(0,a.dY)((()=>t.emit("ready",o.value)))})),{root:n,leafletObject:o}},render(){return ee(this.$slots)}}),{...Z,prefix:{type:String}}),ae=(e,t)=>{const{options:l,methods:a}=J(e,t),o=v(e,le,l),n={...a,setPrefix(e){t.value.setPrefix(e)}};return{options:o,methods:n}},oe=Object.freeze(Object.defineProperty({__proto__:null,controlAttributionProps:le,setupControlAttribution:ae},Symbol.toStringTag,{value:"Module"})),ne=((0,a.pM)({name:"LControlAttribution",props:le,setup(e,t){const o=(0,r.KR)(),n=(0,a.WQ)(L),s=g(k),{options:i,methods:u}=ae(e,o);return(0,a.sV)((async()=>{const{control:d}=n?h.L:await Promise.all([l.e(700),l.e(791)]).then(l.bind(l,4791));o.value=(0,r.IG)(d.attribution(i)),p(u,o.value,e),s({leafletObject:o.value}),(0,a.dY)((()=>t.emit("ready",o.value)))})),{leafletObject:o}},render(){return null}}),{...Z,collapsed:{type:Boolean,default:void 0},autoZIndex:{type:Boolean,default:void 0},hideSingleBase:{type:Boolean,default:void 0},sortLayers:{type:Boolean,default:void 0},sortFunction:{type:Function}}),re=(e,t)=>{const{options:l}=J(e,t);return{options:v(e,ne,l),methods:{addLayer(e){"base"===e.layerType?t.value.addBaseLayer(e.leafletObject,e.name):"overlay"===e.layerType&&t.value.addOverlay(e.leafletObject,e.name)},removeLayer(e){t.value.removeLayer(e.leafletObject)}}}},se=Object.freeze(Object.defineProperty({__proto__:null,controlLayersProps:ne,setupControlLayers:re},Symbol.toStringTag,{value:"Module"})),ie=((0,a.pM)({name:"LControlLayers",props:ne,setup(e,t){const o=(0,r.KR)(),n=(0,a.WQ)(L),s=g(O),{options:i,methods:u}=re(e,o);return(0,a.sV)((async()=>{const{control:d}=n?h.L:await Promise.all([l.e(700),l.e(791)]).then(l.bind(l,4791));o.value=(0,r.IG)(d.layers(void 0,void 0,i)),p(u,o.value,e),s({...e,...u,leafletObject:o.value}),(0,a.dY)((()=>t.emit("ready",o.value)))})),{leafletObject:o}},render(){return null}}),{...Z,maxWidth:{type:Number},metric:{type:Boolean,default:void 0},imperial:{type:Boolean,default:void 0},updateWhenIdle:{type:Boolean,default:void 0}}),ue=(e,t)=>{const{options:l,methods:a}=J(e,t);return{options:v(e,ie,l),methods:a}},de=Object.freeze(Object.defineProperty({__proto__:null,controlScaleProps:ie,setupControlScale:ue},Symbol.toStringTag,{value:"Module"})),ce=((0,a.pM)({name:"LControlScale",props:ie,setup(e,t){const o=(0,r.KR)(),n=(0,a.WQ)(L),s=g(k),{options:i,methods:u}=ue(e,o);return(0,a.sV)((async()=>{const{control:d}=n?h.L:await Promise.all([l.e(700),l.e(791)]).then(l.bind(l,4791));o.value=(0,r.IG)(d.scale(i)),p(u,o.value,e),s({leafletObject:o.value}),(0,a.dY)((()=>t.emit("ready",o.value)))})),{leafletObject:o}},render(){return null}}),{...Z,zoomInText:{type:String},zoomInTitle:{type:String},zoomOutText:{type:String},zoomOutTitle:{type:String}}),pe=(e,t)=>{const{options:l,methods:a}=J(e,t);return{options:v(e,ce,l),methods:a}},ve=Object.freeze(Object.defineProperty({__proto__:null,controlZoomProps:ce,setupControlZoom:pe},Symbol.toStringTag,{value:"Module"})),ye=((0,a.pM)({name:"LControlZoom",props:ce,setup(e,t){const o=(0,r.KR)(),n=(0,a.WQ)(L),s=g(k),{options:i,methods:u}=pe(e,o);return(0,a.sV)((async()=>{const{control:d}=n?h.L:await Promise.all([l.e(700),l.e(791)]).then(l.bind(l,4791));o.value=(0,r.IG)(d.zoom(i)),p(u,o.value,e),s({leafletObject:o.value}),(0,a.dY)((()=>t.emit("ready",o.value)))})),{leafletObject:o}},render(){return null}}),{...B}),me=(e,t,l)=>{const{options:o,methods:n}=A(e,t,l),r=v(e,ye,o),s={...n,addLayer(e){t.value.addLayer(e.leafletObject)},removeLayer(e){t.value.removeLayer(e.leafletObject)}};return(0,a.Gt)(_,s.addLayer),(0,a.Gt)(S,s.removeLayer),{options:r,methods:s}},fe=Object.freeze(Object.defineProperty({__proto__:null,layerGroupProps:ye,setupLayerGroup:me},Symbol.toStringTag,{value:"Module"})),be={...ye},he=(e,t,l)=>{const{options:a,methods:o}=me(e,t,l),n=v(e,be,a),r={...o};return{options:n,methods:r}},ge=Object.freeze(Object.defineProperty({__proto__:null,featureGroupProps:be,setupFeatureGroup:he},Symbol.toStringTag,{value:"Module"})),Le=((0,a.pM)({props:be,setup(e,t){const o=(0,r.KR)(),n=(0,r.KR)(!1),s=(0,a.WQ)(L),i=g(_),{methods:u,options:d}=he(e,o,t);return(0,a.sV)((async()=>{const{featureGroup:c}=s?h.L:await Promise.all([l.e(700),l.e(791)]).then(l.bind(l,4791));o.value=(0,r.IG)(c(void 0,d));const{listeners:v}=y(t.attrs);o.value.on(v),p(u,o.value,e),i({...e,...u,leafletObject:o.value}),n.value=!0,(0,a.dY)((()=>t.emit("ready",o.value)))})),{ready:n,leafletObject:o}},render(){return G(this.ready,this.$slots)}}),{...ye,geojson:{type:[Object,Array],custom:!0},optionsStyle:{type:Function,custom:!0}}),_e=(e,t,l)=>{const{options:a,methods:o}=me(e,t,l),n=v(e,Le,a);Object.prototype.hasOwnProperty.call(e,"optionsStyle")&&(n.style=e.optionsStyle);const r={...o,setGeojson(e){t.value.clearLayers(),t.value.addData(e)},setOptionsStyle(e){t.value.setStyle(e)},getGeoJSONData(){return t.value.toGeoJSON()},getBounds(){return t.value.getBounds()}};return{options:n,methods:r}},Se=Object.freeze(Object.defineProperty({__proto__:null,geoJSONProps:Le,setupGeoJSON:_e},Symbol.toStringTag,{value:"Module"})),ke=((0,a.pM)({props:Le,setup(e,t){const o=(0,r.KR)(),n=(0,r.KR)(!1),s=(0,a.WQ)(L),i=g(_),{methods:u,options:d}=_e(e,o,t);return(0,a.sV)((async()=>{const{geoJSON:c}=s?h.L:await Promise.all([l.e(700),l.e(791)]).then(l.bind(l,4791));o.value=(0,r.IG)(c(e.geojson,d));const{listeners:v}=y(t.attrs);o.value.on(v),p(u,o.value,e),i({...e,...u,leafletObject:o.value}),n.value=!0,(0,a.dY)((()=>t.emit("ready",o.value)))})),{ready:n,leafletObject:o}},render(){return G(this.ready,this.$slots)}}),{...B,opacity:{type:Number},zIndex:{type:Number},tileSize:{type:[Number,Array,Object]},noWrap:{type:Boolean,default:void 0},minZoom:{type:Number},maxZoom:{type:Number},className:{type:String}}),Oe=(e,t,l)=>{const{options:o,methods:n}=A(e,t,l),r=v(e,ke,o),s={...n,setTileComponent(){var e;null==(e=t.value)||e.redraw()}};return(0,a.hi)((()=>{t.value.off()})),{options:r,methods:s}},Pe=(e,t,l,n)=>e.extend({initialize(e){this.tileComponents={},this.on("tileunload",this._unloadTile),l.setOptions(this,e)},createTile(e){const l=this._tileCoordsToKey(e);this.tileComponents[l]=t.create("div");const r=(0,a.h)({setup:n,props:["coords"]},{coords:e});return(0,o.XX)(r,this.tileComponents[l]),this.tileComponents[l]},_unloadTile(e){const t=this._tileCoordsToKey(e.coords);this.tileComponents[t]&&(this.tileComponents[t].innerHTML="",this.tileComponents[t]=void 0)}}),je=Object.freeze(Object.defineProperty({__proto__:null,CreateVueGridLayer:Pe,gridLayerProps:ke,setupGridLayer:Oe},Symbol.toStringTag,{value:"Module"})),Ce=((0,a.pM)({props:{...ke,childRender:{type:Function,required:!0}},setup(e,t){const o=(0,r.KR)(),n=(0,r.KR)(null),s=(0,r.KR)(!1),i=(0,a.WQ)(L),u=g(_),{options:d,methods:c}=Oe(e,o,t);return(0,a.sV)((async()=>{const{GridLayer:n,DomUtil:v,Util:m}=i?h.L:await Promise.all([l.e(700),l.e(791)]).then(l.bind(l,4791)),f=Pe(n,v,m,e.childRender);o.value=(0,r.IG)(new f(d));const{listeners:b}=y(t.attrs);o.value.on(b),p(c,o.value,e),u({...e,...c,leafletObject:o.value}),s.value=!0,(0,a.dY)((()=>t.emit("ready",o.value)))})),{root:n,ready:s,leafletObject:o}},render(){return this.ready?(0,a.h)("div",{style:{display:"none"},ref:"root"}):null}}),{iconUrl:{type:String},iconRetinaUrl:{type:String},iconSize:{type:[Object,Array]},iconAnchor:{type:[Object,Array]},popupAnchor:{type:[Object,Array]},tooltipAnchor:{type:[Object,Array]},shadowUrl:{type:String},shadowRetinaUrl:{type:String},shadowSize:{type:[Object,Array]},shadowAnchor:{type:[Object,Array]},bgPos:{type:[Object,Array]},className:{type:String}}),xe=Object.freeze(Object.defineProperty({__proto__:null,iconProps:Ce},Symbol.toStringTag,{value:"Module"})),Re=((0,a.pM)({name:"LIcon",props:{...Ce,...w},setup(e,t){const o=(0,r.KR)(),n=(0,a.WQ)(L),s=g(P),i=g(j),u=g(C);let d,c,m,f,b;const _=(l,a,o)=>{const n=l&&l.innerHTML;if(!a)return void(o&&b&&s()&&i(n));const{listeners:r}=y(t.attrs);b&&c(b,r);const{options:p}=F(e),h=v(e,Ce,p);n&&(h.html=n),b=h.html?m(h):f(h),d(b,r),u(b)},S=()=>{(0,a.dY)((()=>_(o.value,!0,!1)))},k=()=>{(0,a.dY)((()=>_(o.value,!1,!0)))},O={setIconUrl:S,setIconRetinaUrl:S,setIconSize:S,setIconAnchor:S,setPopupAnchor:S,setTooltipAnchor:S,setShadowUrl:S,setShadowRetinaUrl:S,setShadowAnchor:S,setBgPos:S,setClassName:S,setHtml:S};return(0,a.sV)((async()=>{const{DomEvent:t,divIcon:a,icon:r}=n?h.L:await Promise.all([l.e(700),l.e(791)]).then(l.bind(l,4791));d=t.on,c=t.off,m=a,f=r,p(O,{},e),new MutationObserver(k).observe(o.value,{attributes:!0,childList:!0,characterData:!0,subtree:!0}),S()})),{root:o}},render(){const e=this.$slots.default?this.$slots.default():void 0;return(0,a.h)("div",{ref:"root"},e)}}),{...B,opacity:{type:Number},alt:{type:String},interactive:{type:Boolean,default:void 0},crossOrigin:{type:Boolean,default:void 0},errorOverlayUrl:{type:String},zIndex:{type:Number},className:{type:String},url:{type:String,required:!0,custom:!0},bounds:{type:[Array,Object],required:!0,custom:!0}}),Me=(e,t,l)=>{const{options:a,methods:o}=A(e,t,l),n=v(e,Re,a),r={...o,setOpacity(e){return t.value.setOpacity(e)},setUrl(e){return t.value.setUrl(e)},setBounds(e){return t.value.setBounds(e)},getBounds(){return t.value.getBounds()},getElement(){return t.value.getElement()},bringToFront(){return t.value.bringToFront()},bringToBack(){return t.value.bringToBack()},setZIndex(e){return t.value.setZIndex(e)}};return{options:n,methods:r}},Te=Object.freeze(Object.defineProperty({__proto__:null,imageOverlayProps:Re,setupImageOverlay:Me},Symbol.toStringTag,{value:"Module"}));(0,a.pM)({name:"LImageOverlay",props:Re,setup(e,t){const o=(0,r.KR)(),n=(0,r.KR)(!1),s=(0,a.WQ)(L),i=g(_),{options:u,methods:d}=Me(e,o,t);return(0,a.sV)((async()=>{const{imageOverlay:c}=s?h.L:await Promise.all([l.e(700),l.e(791)]).then(l.bind(l,4791));o.value=(0,r.IG)(c(e.url,e.bounds,u));const{listeners:v}=y(t.attrs);o.value.on(v),p(d,o.value,e),i({...e,...d,leafletObject:o.value}),n.value=!0,(0,a.dY)((()=>t.emit("ready",o.value)))})),{ready:n,leafletObject:o}},render(){return G(this.ready,this.$slots)}}),(0,a.pM)({props:ye,setup(e,t){const o=(0,r.KR)(),n=(0,r.KR)(!1),s=(0,a.WQ)(L),i=g(_),{methods:u}=me(e,o,t);return(0,a.sV)((async()=>{const{layerGroup:d}=s?h.L:await Promise.all([l.e(700),l.e(791)]).then(l.bind(l,4791));o.value=(0,r.IG)(d(void 0,e.options));const{listeners:c}=y(t.attrs);o.value.on(c),p(u,o.value,e),i({...e,...u,leafletObject:o.value}),n.value=!0,(0,a.dY)((()=>t.emit("ready",o.value)))})),{ready:n,leafletObject:o}},render(){return G(this.ready,this.$slots)}});function we(e,t,l){var a,o,n;void 0===t&&(t=50),void 0===l&&(l={});var r=null!=(a=l.isImmediate)&&a,s=null!=(o=l.callback)&&o,i=l.maxWait,u=Date.now(),d=[];function c(){if(void 0!==i){var e=Date.now()-u;if(e+t>=i)return i-e}return t}var p=function(){var t=[].slice.call(arguments),l=this;return new Promise((function(a,o){var i=r&&void 0===n;if(void 0!==n&&clearTimeout(n),n=setTimeout((function(){if(n=void 0,u=Date.now(),!r){var a=e.apply(l,t);s&&s(a),d.forEach((function(e){return(0,e.resolve)(a)})),d=[]}}),c()),i){var p=e.apply(l,t);return s&&s(p),a(p)}d.push({resolve:a,reject:o})}))};return p.cancel=function(e){void 0!==n&&clearTimeout(n),d.forEach((function(t){return(0,t.reject)(e)})),d=[]},p}const Fe={...w,center:{type:[Object,Array]},bounds:{type:[Array,Object]},maxBounds:{type:[Array,Object]},zoom:{type:Number},minZoom:{type:Number},maxZoom:{type:Number},paddingBottomRight:{type:[Object,Array]},paddingTopLeft:{type:Object},padding:{type:Object},worldCopyJump:{type:Boolean,default:void 0},crs:{type:[String,Object]},maxBoundsViscosity:{type:Number},inertia:{type:Boolean,default:void 0},inertiaDeceleration:{type:Number},inertiaMaxSpeed:{type:Number},easeLinearity:{type:Number},zoomAnimation:{type:Boolean,default:void 0},zoomAnimationThreshold:{type:Number},fadeAnimation:{type:Boolean,default:void 0},markerZoomAnimation:{type:Boolean,default:void 0},noBlockingAnimations:{type:Boolean,default:void 0},useGlobalLeaflet:{type:Boolean,default:!0,custom:!0}},Ie=(0,a.pM)({inheritAttrs:!1,emits:["ready","update:zoom","update:center","update:bounds"],props:Fe,setup(e,t){const o=(0,r.KR)(),n=(0,r.Kh)({ready:!1,layersToAdd:[],layersInControl:[]}),{options:s}=F(e),d=v(e,Fe,s),{listeners:c,attrs:g}=y(t.attrs),P=f(_),j=f(S),C=f(k),x=f(O);(0,a.Gt)(L,e.useGlobalLeaflet);const R=(0,a.EW)((()=>{const t={};return e.noBlockingAnimations&&(t.animate=!1),t})),M=(0,a.EW)((()=>{const t=R.value;return e.padding&&(t.padding=e.padding),e.paddingTopLeft&&(t.paddingTopLeft=e.paddingTopLeft),e.paddingBottomRight&&(t.paddingBottomRight=e.paddingBottomRight),t})),T={moveend:we((e=>{n.leafletRef&&(t.emit("update:zoom",n.leafletRef.getZoom()),t.emit("update:center",n.leafletRef.getCenter()),t.emit("update:bounds",n.leafletRef.getBounds()))})),overlayadd(e){const t=n.layersInControl.find((t=>t.name===e.name));t&&t.updateVisibleProp(!0)},overlayremove(e){const t=n.layersInControl.find((t=>t.name===e.name));t&&t.updateVisibleProp(!1)}};(0,a.sV)((async()=>{e.useGlobalLeaflet&&(h.L=h.L||await Promise.all([l.e(700),l.e(886)]).then(l.t.bind(l,6886,23)));const{map:s,CRS:u,Icon:v,latLngBounds:y,latLng:f,stamp:g}=e.useGlobalLeaflet?h.L:await Promise.all([l.e(700),l.e(791)]).then(l.bind(l,4791));try{d.beforeMapMount&&await d.beforeMapMount()}catch(S){console.error(`The following error occurred running the provided beforeMapMount hook ${S.message}`)}await m(v);const L="string"==typeof d.crs?u[d.crs]:d.crs;d.crs=L||u.EPSG3857;const _={addLayer(e){void 0!==e.layerType&&(void 0===n.layerControl?n.layersToAdd.push(e):n.layersInControl.find((t=>g(t.leafletObject)===g(e.leafletObject)))||(n.layerControl.addLayer(e),n.layersInControl.push(e))),!1!==e.visible&&n.leafletRef.addLayer(e.leafletObject)},removeLayer(e){void 0!==e.layerType&&(void 0===n.layerControl?n.layersToAdd=n.layersToAdd.filter((t=>t.name!==e.name)):(n.layerControl.removeLayer(e.leafletObject),n.layersInControl=n.layersInControl.filter((t=>g(t.leafletObject)!==g(e.leafletObject))))),n.leafletRef.removeLayer(e.leafletObject)},registerLayerControl(e){n.layerControl=e,n.layersToAdd.forEach((e=>{n.layerControl.addLayer(e)})),n.layersToAdd=[],C(e)},registerControl(e){n.leafletRef.addControl(e.leafletObject)},setZoom(e){const t=n.leafletRef.getZoom();e!==t&&n.leafletRef.setZoom(e,R.value)},setCrs(e){const t=n.leafletRef.getBounds();n.leafletRef.options.crs=e,n.leafletRef.fitBounds(t,{animate:!1,padding:[0,0]})},fitBounds(e){n.leafletRef.fitBounds(e,M.value)},setBounds(e){if(!e)return;const t=y(e);t.isValid()&&!(n.lastSetBounds||n.leafletRef.getBounds()).equals(t,0)&&(n.lastSetBounds=t,n.leafletRef.fitBounds(t))},setCenter(e){if(null==e)return;const t=f(e),l=n.lastSetCenter||n.leafletRef.getCenter();(l.lat!==t.lat||l.lng!==t.lng)&&(n.lastSetCenter=t,n.leafletRef.panTo(t,R.value))}};b(P,_.addLayer),b(j,_.removeLayer),b(C,_.registerControl),b(x,_.registerLayerControl),n.leafletRef=(0,r.IG)(s(o.value,d)),p(_,n.leafletRef,e),i(n.leafletRef,T),i(n.leafletRef,c),n.ready=!0,(0,a.dY)((()=>t.emit("ready",n.leafletRef)))})),(0,a.xo)((()=>{u(T),n.leafletRef&&(n.leafletRef.off(),n.leafletRef.remove())}));const w=(0,a.EW)((()=>n.leafletRef)),I=(0,a.EW)((()=>n.ready));return{root:o,ready:I,leafletObject:w,attrs:g}},render({attrs:e}){return e.style||(e.style={}),e.style.width||(e.style.width="100%"),e.style.height||(e.style.height="100%"),(0,a.h)("div",{...e,ref:"root"},this.ready&&this.$slots.default?this.$slots.default():{})}}),Be=["Symbol(Comment)","Symbol(Text)"],Ae=["LTooltip","LPopup"],Ge={...B,draggable:{type:Boolean,default:void 0},icon:{type:[Object]},zIndexOffset:{type:Number},latLng:{type:[Object,Array],custom:!0,required:!0}},Ee=(e,t,l)=>{const{options:a,methods:o}=A(e,t,l),n=v(e,Ge,a),r={...o,setDraggable(e){t.value.dragging&&(e?t.value.dragging.enable():t.value.dragging.disable())},latLngSync(e){l.emit("update:latLng",e.latlng),l.emit("update:lat-lng",e.latlng)},setLatLng(e){if(null!=e&&t.value){const l=t.value.getLatLng();(!l||!l.equals(e))&&t.value.setLatLng(e)}}};return{options:n,methods:r}},Ke=(e,t)=>{const l=t.slots.default&&t.slots.default();return l&&l.length&&l.some(We)};function We(e){return!(Be.includes(e.type.toString())||Ae.includes(e.type.name))}const Ne=Object.freeze(Object.defineProperty({__proto__:null,markerProps:Ge,setupMarker:Ee,shouldBlankIcon:Ke},Symbol.toStringTag,{value:"Module"})),ze=((0,a.pM)({name:"LMarker",props:Ge,setup(e,t){const o=(0,r.KR)(),n=(0,r.KR)(!1),s=(0,a.WQ)(L),i=g(_);(0,a.Gt)(P,(()=>{var e;return!(null==(e=o.value)||!e.getElement())})),(0,a.Gt)(j,(e=>{var t,l;const a=c(null==(t=o.value)?void 0:t.getElement)&&(null==(l=o.value)?void 0:l.getElement());a&&(a.innerHTML=e)})),(0,a.Gt)(C,(e=>{var t;return(null==(t=o.value)?void 0:t.setIcon)&&o.value.setIcon(e)}));const{options:d,methods:v}=Ee(e,o,t),m={moveHandler:we(v.latLngSync)};return(0,a.sV)((async()=>{const{marker:u,divIcon:c}=s?h.L:await Promise.all([l.e(700),l.e(791)]).then(l.bind(l,4791));Ke(d,t)&&(d.icon=c({className:""})),o.value=(0,r.IG)(u(e.latLng,d));const{listeners:f}=y(t.attrs);o.value.on(f),o.value.on("move",m.moveHandler),p(v,o.value,e),i({...e,...v,leafletObject:o.value}),n.value=!0,(0,a.dY)((()=>t.emit("ready",o.value)))})),(0,a.xo)((()=>u(m))),{ready:n,leafletObject:o}},render(){return G(this.ready,this.$slots)}}),{...z,smoothFactor:{type:Number},noClip:{type:Boolean,default:void 0},latLngs:{type:Array,required:!0,custom:!0}}),Ve=(e,t,l)=>{const{options:a,methods:o}=V(e,t,l),n=v(e,ze,a),r={...o,setSmoothFactor(e){t.value.setStyle({smoothFactor:e})},setNoClip(e){t.value.setStyle({noClip:e})},addLatLng(e){t.value.addLatLng(e)}};return{options:n,methods:r}},$e=Object.freeze(Object.defineProperty({__proto__:null,polylineProps:ze,setupPolyline:Ve},Symbol.toStringTag,{value:"Module"})),Qe={...ze},Xe=(e,t,l)=>{const{options:a,methods:o}=Ve(e,t,l),n=v(e,Qe,a),r={...o,toGeoJSON(e){return t.value.toGeoJSON(e)}};return{options:n,methods:r}},Ye=Object.freeze(Object.defineProperty({__proto__:null,polygonProps:Qe,setupPolygon:Xe},Symbol.toStringTag,{value:"Module"})),Ue=((0,a.pM)({name:"LPolygon",props:Qe,setup(e,t){const o=(0,r.KR)(),n=(0,r.KR)(!1),s=(0,a.WQ)(L),i=g(_),{options:u,methods:d}=Xe(e,o,t);return(0,a.sV)((async()=>{const{polygon:c}=s?h.L:await Promise.all([l.e(700),l.e(791)]).then(l.bind(l,4791));o.value=(0,r.IG)(c(e.latLngs,u));const{listeners:v}=y(t.attrs);o.value.on(v),p(d,o.value,e),i({...e,...d,leafletObject:o.value}),n.value=!0,(0,a.dY)((()=>t.emit("ready",o.value)))})),{ready:n,leafletObject:o}},render(){return G(this.ready,this.$slots)}}),(0,a.pM)({name:"LPolyline",props:ze,setup(e,t){const o=(0,r.KR)(),n=(0,r.KR)(!1),s=(0,a.WQ)(L),i=g(_),{options:u,methods:d}=Ve(e,o,t);return(0,a.sV)((async()=>{const{polyline:c}=s?h.L:await Promise.all([l.e(700),l.e(791)]).then(l.bind(l,4791));o.value=(0,r.IG)(c(e.latLngs,u));const{listeners:v}=y(t.attrs);o.value.on(v),p(d,o.value,e),i({...e,...d,leafletObject:o.value}),n.value=!0,(0,a.dY)((()=>t.emit("ready",o.value)))})),{ready:n,leafletObject:o}},render(){return G(this.ready,this.$slots)}})),De={...w,content:{type:String,default:null}},He=(e,t)=>{const{options:l,methods:a}=F(e),o={...a,setContent(e){t.value&&null!==e&&void 0!==e&&t.value.setContent(e)}};return{options:l,methods:o}},qe=e=>e.default?(0,a.h)("div",{ref:"root"},e.default()):null,Ze=Object.freeze(Object.defineProperty({__proto__:null,popperProps:De,render:qe,setupPopper:He},Symbol.toStringTag,{value:"Module"})),Je={...De,latLng:{type:[Object,Array],default:()=>[]}},et=(e,t)=>{const{options:l,methods:a}=He(e,t);return{options:l,methods:a}},tt=Object.freeze(Object.defineProperty({__proto__:null,popupProps:Je,setupPopup:et},Symbol.toStringTag,{value:"Module"})),lt=(0,a.pM)({name:"LPopup",props:Je,setup(e,t){const o=(0,r.KR)(),n=(0,r.KR)(null),s=(0,a.WQ)(L),i=g(x),u=g(M),{options:d,methods:c}=et(e,o);return(0,a.sV)((async()=>{const{popup:u}=s?h.L:await Promise.all([l.e(700),l.e(791)]).then(l.bind(l,4791));o.value=(0,r.IG)(u(d)),void 0!==e.latLng&&o.value.setLatLng(e.latLng),p(c,o.value,e);const{listeners:v}=y(t.attrs);o.value.on(v),o.value.setContent(e.content||n.value||""),i(o.value),(0,a.dY)((()=>t.emit("ready",o.value)))})),(0,a.xo)((()=>{u()})),{root:n,leafletObject:o}},render(){return qe(this.$slots)}}),at={...Qe,latLngs:{...Qe.latLngs,required:!1},bounds:{type:Object,custom:!0}},ot=(e,t,l)=>{const{options:a,methods:o}=Xe(e,t,l),n=v(e,at,a),r={...o,setBounds(e){t.value.setBounds(e)},setLatLngs(e){t.value.setBounds(e)}};return{options:n,methods:r}},nt=Object.freeze(Object.defineProperty({__proto__:null,rectangleProps:at,setupRectangle:ot},Symbol.toStringTag,{value:"Module"})),rt=((0,a.pM)({name:"LRectangle",props:at,setup(e,t){const o=(0,r.KR)(),n=(0,r.KR)(!1),s=(0,a.WQ)(L),i=g(_),{options:u,methods:d}=ot(e,o,t);return(0,a.sV)((async()=>{const{rectangle:c,latLngBounds:v}=s?h.L:await Promise.all([l.e(700),l.e(791)]).then(l.bind(l,4791)),m=e.bounds?v(e.bounds):v(e.latLngs||[]);o.value=(0,r.IG)(c(m,u));const{listeners:f}=y(t.attrs);o.value.on(f),p(d,o.value,e),i({...e,...d,leafletObject:o.value}),n.value=!0,(0,a.dY)((()=>t.emit("ready",o.value)))})),{ready:n,leafletObject:o}},render(){return G(this.ready,this.$slots)}}),{...ke,tms:{type:Boolean,default:void 0},subdomains:{type:[String,Array],validator:e=>"string"==typeof e||!!Array.isArray(e)&&e.every((e=>"string"==typeof e))},detectRetina:{type:Boolean,default:void 0},url:{type:String,required:!0,custom:!0}}),st=(e,t,l)=>{const{options:a,methods:o}=Oe(e,t,l),n=v(e,rt,a),r={...o};return{options:n,methods:r}},it=Object.freeze(Object.defineProperty({__proto__:null,setupTileLayer:st,tileLayerProps:rt},Symbol.toStringTag,{value:"Module"})),ut=(0,a.pM)({props:rt,setup(e,t){const o=(0,r.KR)(),n=(0,a.WQ)(L),s=g(_),{options:i,methods:u}=st(e,o,t);return(0,a.sV)((async()=>{const{tileLayer:d}=n?h.L:await Promise.all([l.e(700),l.e(791)]).then(l.bind(l,4791));o.value=(0,r.IG)(d(e.url,i));const{listeners:c}=y(t.attrs);o.value.on(c),p(u,o.value,e),s({...e,...u,leafletObject:o.value}),(0,a.dY)((()=>t.emit("ready",o.value)))})),{leafletObject:o}},render(){return null}}),dt={...De},ct=(e,t)=>{const{options:l,methods:o}=He(e,t),n=g(T);return(0,a.xo)((()=>{n()})),{options:l,methods:o}},pt=Object.freeze(Object.defineProperty({__proto__:null,setupTooltip:ct,tooltipProps:dt},Symbol.toStringTag,{value:"Module"})),vt=((0,a.pM)({name:"LTooltip",props:dt,setup(e,t){const o=(0,r.KR)(),n=(0,r.KR)(null),s=(0,a.WQ)(L),i=g(R),{options:u,methods:d}=ct(e,o);return(0,a.sV)((async()=>{const{tooltip:c}=s?h.L:await Promise.all([l.e(700),l.e(791)]).then(l.bind(l,4791));o.value=(0,r.IG)(c(u)),p(d,o.value,e);const{listeners:v}=y(t.attrs);o.value.on(v),o.value.setContent(e.content||n.value||""),i(o.value),(0,a.dY)((()=>t.emit("ready",o.value)))})),{root:n,leafletObject:o}},render(){return qe(this.$slots)}}),{...rt,layers:{type:String,required:!0},styles:{type:String},format:{type:String},transparent:{type:Boolean,default:void 0},version:{type:String},crs:{type:Object},uppercase:{type:Boolean,default:void 0}}),yt=(e,t,l)=>{const{options:a,methods:o}=st(e,t,l);return{options:v(e,vt,a),methods:{...o}}},mt=Object.freeze(Object.defineProperty({__proto__:null,setupWMSTileLayer:yt,wmsTileLayerProps:vt},Symbol.toStringTag,{value:"Module"})),ft=((0,a.pM)({props:vt,setup(e,t){const o=(0,r.KR)(),n=(0,a.WQ)(L),s=g(_),{options:i,methods:u}=yt(e,o,t);return(0,a.sV)((async()=>{const{tileLayer:d}=n?h.L:await Promise.all([l.e(700),l.e(791)]).then(l.bind(l,4791));o.value=(0,r.IG)(d.wms(e.url,i));const{listeners:c}=y(t.attrs);o.value.on(c),p(u,o.value,e),s({...e,...u,leafletObject:o.value}),(0,a.dY)((()=>t.emit("ready",o.value)))})),{leafletObject:o}},render(){return null}}),Symbol.toStringTag,{class:"container"}),bt={class:"calculation-mode-section"},ht={class:"mode-selector"},gt={class:"mode-label"},Lt={class:"mode-label"},_t={key:0,class:"filter-options"},St={class:"filter-label"},kt={key:0,class:"fix-info"},Ot={class:"section-card"},Pt={class:"file-upload-section"},jt={key:0,class:"file-upload-group"},Ct={class:"file-upload-button"},xt={key:0,class:"selected-filename"},Rt={class:"file-upload-group"},Mt={class:"file-upload-button"},Tt={key:0,class:"selected-filename"},wt={class:"file-upload-group"},Ft={class:"file-upload-button"},It={key:0,class:"selected-filename"},Bt={key:0,class:"section-card"},At={key:0,class:"center-point-info"},Gt={class:"scrollable-container"},Et={class:"data-table"},Kt={class:"header-row"},Wt={class:"data-cell"},Nt={class:"data-cell"},zt={class:"data-cell"},Vt={class:"data-cell"},$t={class:"data-cell"},Qt={class:"data-cell"},Xt={class:"data-cell"},Yt={class:"data-cell"},Ut={class:"data-cell"},Dt={key:1,class:"empty-state"},Ht={key:0,class:"section-card"},qt={key:0,class:"chart-container"},Zt={key:1,class:"map-container"},Jt={key:1,class:"empty-state"},el={key:0},tl={class:"stats-table"},ll={key:1,class:"empty-state"};var al={__name:"NmeaCEPCalc",setup(e){s.t1.register(s.Pz,s.kc,s.FN,s.hE,s.m_);const t=(0,r.KR)([]),l=(0,r.KR)([]),i=(0,r.KR)([]),u=(0,r.KR)({pacc_3d:{cep50:0,cep68:0,cep95:0,cep99:0,min:0,max:0,avg:0},pacc_h:{cep50:0,cep68:0,cep95:0,cep99:0,min:0,max:0,avg:0},pacc_v:{cep50:0,cep68:0,cep95:0,cep99:0,min:0,max:0,avg:0}}),d=(0,r.KR)(""),c=(0,r.KR)(""),p=(0,r.KR)({lat:0,lon:0}),v=(0,r.KR)();let y=null;const m=(0,r.KR)("stationary"),f=(0,r.KR)(15),b=(0,r.KR)(null),h=(0,r.KR)(!1),g=(0,a.EW)((()=>{if(0===t.value.length)return[37.5665,126.978];const e=t.value[0];return[e.reference.lat,e.reference.lon]})),L=(0,a.EW)((()=>t.value.map((e=>[e.reference.lat,e.reference.lon])))),_=(0,a.EW)((()=>t.value.map((e=>[e.test.lat,e.test.lon])))),S=async()=>{if(h.value&&b.value?.leafletObject){await(0,a.dY)();try{b.value.leafletObject.invalidateSize()}catch(e){console.warn("지도 업데이트 중 오류 발생:",e)}}},k=()=>{h.value=!0,S()};(0,a.wB)([t,m],(async()=>{"moving"===m.value&&t.value.length>0&&await S()}),{deep:!0}),(0,a.sV)((()=>{"moving"===m.value&&t.value.length>0&&S()}));const O=(0,r.KR)(!1),P=(0,r.KR)(0),j=(0,r.KR)(0);function C(e){const t=e.split(/\r?\n/),l=[];let a=0,o=0,n=!1,r=0;for(const s of t){let e="",t="",i="",u="";if(n=!1,r=0,s.startsWith("$GNGGA")||s.startsWith("$GPGGA")){const l=s.split(",");e=l[2],t=l[3],i=l[4],u=l[5],a=isNaN(parseFloat(l[9]))?0:parseFloat(l[9]),o=G(l[1]),r=parseInt(l[6]),n=r>0}else if(s.startsWith("$GNRMC")||s.startsWith("$GPRMC")){const l=s.split(",");e=l[3],t=l[4],i=l[5],u=l[6],o=G(l[1]),n="A"===l[2]}const d=I(e,t),c=I(i,u);isNaN(d)||isNaN(c)||0===d||0===c||l.push({lat:d,lon:c,alt:a,time:o,fix:n,fixQuality:r})}return l}function x(){P.value=l.value.filter((e=>4===e.fixQuality)).length,j.value=i.value.filter((e=>4===e.fixQuality)).length}function R(e){const t=e.target.files[0];if(!t)return;d.value=t.name;const a=new FileReader;a.onload=()=>{const e=a.result.replace(/\0/g,"");l.value=C(e),x(),i.value.length>0&&w()},a.readAsText(t)}function M(e){const t=e.target.files[0];if(!t)return;c.value=t.name;const a=new FileReader;a.onload=()=>{const e=a.result.replace(/\0/g,"");if(i.value=C(e),x(),"stationary"===m.value){const e=i.value.reduce(((e,t)=>e+t.lat),0)/i.value.length,t=i.value.reduce(((e,t)=>e+t.lon),0)/i.value.length,l=i.value.reduce(((e,t)=>e+t.alt),0)/i.value.length;p.value={lat:e,lon:t,alt:l},T()}else l.value.length>0&&w()},a.readAsText(t)}function T(){const e=i.value.map((e=>({reference:{lat:p.value.lat,lon:p.value.lon,alt:p.value.alt,time:e.time},test:{lat:e.lat,lon:e.lon,alt:e.alt,time:e.time},dist3d:K(p.value,e),distH:W(p.value,e),distV:N(p.value,e)})));t.value=e,u.value.pacc_3d=F(e.map((e=>e.dist3d))),u.value.pacc_h=F(e.map((e=>e.distH))),u.value.pacc_v=F(e.map((e=>e.distV))),e.length>0&&(0,a.dY)((()=>A()))}function w(){const e=O.value?l.value.filter((e=>4===e.fixQuality)):l.value,o=O.value?i.value.filter((e=>4===e.fixQuality)):i.value,n=[...e].sort(((e,t)=>e.time-t.time)),r=[...o].sort(((e,t)=>e.time-t.time)),s=[],d=new Map;r.forEach((e=>{const t=Math.round(10*e.time)/10;d.has(t)||d.set(t,[]),d.get(t).push(e)}));for(const t of n){const e=Math.round(10*t.time)/10,l=d.get(e);if(l&&l.length>0){const e=l.reduce(((e,l)=>{const a=K(t,l);return!e||a<e.distance?{point:l,distance:a}:e}),null);e&&s.push({reference:t,test:e.point,dist3d:K(t,e.point),distH:W(t,e.point),distV:N(t,e.point),time:t.time})}}s.length<.3*n.length&&console.warn("매칭된 포인트가 전체 데이터의 30% 미만입니다. 데이터 수집 주기와 시간 동기화를 확인해주세요.");const c=s.map((e=>({time:e.time,dist3d:e.dist3d,distH:e.distH,distV:e.distV}))),v=e=>{const t=e.map((e=>e.dist3d)),l=t.reduce(((e,t)=>e+t),0)/t.length,a=Math.sqrt(t.reduce(((e,t)=>e+Math.pow(t-l,2)),0)/t.length);return{mean:l,stdDev:a,max:Math.max(...t),min:Math.min(...t),timeRange:{start:e[0].time,end:e[e.length-1].time}}},y=v(c);if(console.log("시간별 거리 차이 통계:",{"평균거리":y.mean.toFixed(3)+"m","표준편차":y.stdDev.toFixed(3)+"m","최대거리":y.max.toFixed(3)+"m","최소거리":y.min.toFixed(3)+"m","시간범위":`${B(y.timeRange.start)} - ${B(y.timeRange.end)}`}),t.value=s,s.length>0){const e=c.filter((e=>Math.abs(e.dist3d-y.mean)<=3*y.stdDev)).map((e=>e.dist3d));u.value.pacc_3d=F(e),u.value.pacc_h=F(s.map((e=>e.distH))),u.value.pacc_v=F(s.map((e=>e.distV))),p.value={lat:s[0].reference.lat,lon:s[0].reference.lon,alt:s[0].reference.alt},(0,a.dY)((()=>A()))}}function F(e){const t=e.reduce(((e,t)=>e+t),0)/e.length,l=Math.sqrt(e.reduce(((e,l)=>e+Math.pow(l-t,2)),0)/e.length),a=e.filter((e=>Math.abs(e-t)<=3*l)),o=a.sort(((e,t)=>e-t)),n=o.length,r=Math.round(.5*n)-1,s=Math.round(.68*n)-1,i=Math.round(.95*n)-1,u=Math.round(.99*n)-1;return{cep50:o[r]||0,cep68:o[s]||0,cep95:o[i]||0,cep99:o[u]||0,min:o[0]||0,max:o[o.length-1]||0,avg:o.reduce(((e,t)=>e+t),0)/n||0}}function I(e,t){if(!e||!t)return NaN;let l,a;"N"===t||"S"===t?(l=parseInt(e.substring(0,2)),a=parseFloat(e.substring(2))):(l=parseInt(e.substring(0,3)),a=parseFloat(e.substring(3)));let o=l+a/60;return"S"===t||"W"===t?-o:o}function B(e){const t=Math.floor(e/3600),l=Math.floor(e%3600/60),a=Math.floor(e%60);return`${t.toString().padStart(2,"0")}:${l.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}`}function A(){if(!v.value)return;y&&y.destroy();const e=t.value.map((e=>({x:E(p.value,e.reference)*(e.reference.lon>p.value.lon?1:-1),y:E(p.value,e.reference)*(e.reference.lat>p.value.lat?1:-1),lat:e.reference.lat.toFixed(6),lon:e.reference.lon.toFixed(6)}))),l=t.value.map((e=>({x:E(p.value,e.test)*(e.test.lon>p.value.lon?1:-1),y:E(p.value,e.test)*(e.test.lat>p.value.lat?1:-1),lat:e.test.lat.toFixed(6),lon:e.test.lon.toFixed(6),dist3d:e.dist3d.toFixed(3)}))),a=1.2*Math.max(...e.map((e=>Math.abs(e.x))),...e.map((e=>Math.abs(e.y))),...l.map((e=>Math.abs(e.x))),...l.map((e=>Math.abs(e.y))));y=new s.t1(v.value,{type:"scatter",data:{datasets:[{label:"stationary"===m.value?"Center Point":"Reference GPS",data:e,backgroundColor:"rgba(0, 0, 255, 0.6)",pointRadius:4},{label:"Test GPS",data:l,backgroundColor:"rgba(255, 0, 0, 0.6)",pointRadius:4}]},options:{aspectRatio:1,responsive:!0,interaction:{mode:"nearest",axis:"xy",intersect:!0},plugins:{tooltip:{enabled:!0,mode:"point",intersect:!0,position:"nearest",filter:function(e){return 0===e.datasetIndex||1===e.datasetIndex},callbacks:{label:function(e){const t=e.raw;return"Test GPS"===e.dataset.label?`위도: ${t.lat}, 경도: ${t.lon}, 거리: ${t.dist3d}m`:`위도: ${t.lat}, 경도: ${t.lon}`}}},title:{display:!0,text:"Position Scatter Plot with CEP Circles",padding:20},legend:{display:!0,position:"bottom"},cepCircles:{radii:[{value:u.value.pacc_3d.cep50,label:"CEP50"},{value:u.value.pacc_3d.cep68,label:"CEP68"},{value:u.value.pacc_3d.cep95,label:"CEP95"},{value:u.value.pacc_3d.cep99,label:"CEP99"}]}},scales:{x:{title:{display:!0,text:"East-West (meters)"},min:-a,max:a,grid:{color:"rgba(0, 0, 0, 0.1)",drawTicks:!0,drawOnChartArea:!0},ticks:{stepSize:a/5}},y:{title:{display:!0,text:"North-South (meters)"},min:-a,max:a,grid:{color:"rgba(0, 0, 0, 0.1)",drawTicks:!0,drawOnChartArea:!0},ticks:{stepSize:a/5}}}},plugins:[{id:"cepCircles",beforeDatasetsDraw(e,t,l){const{ctx:a,scales:o}=e,n=o.x.getPixelForValue(0),r=o.y.getPixelForValue(0),s=l.radii||[],i=["red","blue","orange","green"];a.save(),s.forEach(((e,t)=>{const l=Math.abs(o.x.getPixelForValue(e.value)-n);a.beginPath(),a.arc(n,r,l,0,2*Math.PI),a.strokeStyle=i[t].replace("0.2","1.0"),a.lineWidth=2,a.stroke();const s=Math.PI/4,u=n+l*Math.cos(s),d=r-l*Math.sin(s);a.fillStyle=i[t].replace("0.2","1.0"),a.font="12px Arial",a.textAlign="left",a.fillText(`${e.label}: ${e.value.toFixed(2)}m`,u,d)})),a.restore()}}]})}function G(e){if(!e)return 0;const t=parseInt(e.substring(0,2)),l=parseInt(e.substring(2,4)),a=parseFloat(e.substring(4));return 3600*t+60*l+a}function E(e,t){const l=6371e3,a=e.lat*Math.PI/180,o=t.lat*Math.PI/180,n=e.lon*Math.PI/180,r=t.lon*Math.PI/180,s=o-a,i=r-n,u=Math.sin(s/2)*Math.sin(s/2)+Math.cos(a)*Math.cos(o)*Math.sin(i/2)*Math.sin(i/2),d=2*Math.atan2(Math.sqrt(u),Math.sqrt(1-u));return l*d}function K(e,t){const l=E(e,t),a=Math.abs(e.alt-t.alt);return Math.sqrt(l*l+a*a)}function W(e,t){return E(e,t)}function N(e,t){return Math.abs(e.alt-t.alt)}return(0,a.wB)(m,(()=>{P.value=0,j.value=0})),(0,a.wB)(O,(async()=>{"moving"===m.value&&t.value.length>0&&(await w(),y&&(y.destroy(),y=null),await(0,a.dY)(),A(),h.value&&b.value?.leafletObject&&await S())})),(e,s)=>((0,a.uX)(),(0,a.CE)("div",ft,[s[28]||(s[28]=(0,a.Lk)("h1",{class:"section-title"},[(0,a.Lk)("span",{class:"section-icon"},"📊"),(0,a.eW)(" NMEA CEP 계산기 ")],-1)),(0,a.Lk)("div",bt,[(0,a.Lk)("div",ht,[(0,a.Lk)("label",gt,[(0,a.bo)((0,a.Lk)("input",{type:"radio","onUpdate:modelValue":s[0]||(s[0]=e=>m.value=e),value:"stationary"},null,512),[[o.XL,m.value]]),s[4]||(s[4]=(0,a.eW)(" 정지상태 CEP 계산 "))]),(0,a.Lk)("label",Lt,[(0,a.bo)((0,a.Lk)("input",{type:"radio","onUpdate:modelValue":s[1]||(s[1]=e=>m.value=e),value:"moving"},null,512),[[o.XL,m.value]]),s[5]||(s[5]=(0,a.eW)(" 이동상태 CEP 계산 "))])]),"moving"===m.value?((0,a.uX)(),(0,a.CE)("div",_t,[(0,a.Lk)("label",St,[(0,a.bo)((0,a.Lk)("input",{type:"checkbox","onUpdate:modelValue":s[2]||(s[2]=e=>O.value=e)},null,512),[[o.lH,O.value]]),s[6]||(s[6]=(0,a.eW)(" FIX 데이터만 사용 "))]),O.value?((0,a.uX)(),(0,a.CE)("div",kt,[(0,a.Lk)("span",null,"레퍼런스 FIX: "+(0,n.v_)(P.value)+" / "+(0,n.v_)(l.value.length),1),(0,a.Lk)("span",null,"측정 FIX: "+(0,n.v_)(j.value)+" / "+(0,n.v_)(i.value.length),1)])):(0,a.Q3)("",!0)])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",Ot,[(0,a.Lk)("div",Pt,["stationary"===m.value?((0,a.uX)(),(0,a.CE)("div",jt,[(0,a.Lk)("label",Ct,[s[7]||(s[7]=(0,a.Lk)("span",{class:"file-upload-text"},"측정 GPS 파일 선택",-1)),(0,a.Lk)("input",{type:"file",accept:".txt,.log",onChange:M,class:"file-input"},null,32)]),c.value?((0,a.uX)(),(0,a.CE)("span",xt,(0,n.v_)(c.value),1)):(0,a.Q3)("",!0)])):((0,a.uX)(),(0,a.CE)(a.FK,{key:1},[(0,a.Lk)("div",Rt,[(0,a.Lk)("label",Mt,[s[8]||(s[8]=(0,a.Lk)("span",{class:"file-upload-text"},"레퍼런스 GPS 파일 선택",-1)),(0,a.Lk)("input",{type:"file",accept:".txt,.log",onChange:R,class:"file-input"},null,32)]),d.value?((0,a.uX)(),(0,a.CE)("span",Tt,(0,n.v_)(d.value),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("div",wt,[(0,a.Lk)("label",Ft,[s[9]||(s[9]=(0,a.Lk)("span",{class:"file-upload-text"},"측정 GPS 파일 선택",-1)),(0,a.Lk)("input",{type:"file",accept:".txt,.log",onChange:M,class:"file-input"},null,32)]),c.value?((0,a.uX)(),(0,a.CE)("span",It,(0,n.v_)(c.value),1)):(0,a.Q3)("",!0)])],64))])]),s[29]||(s[29]=(0,a.Lk)("h2",{class:"font-semibold"},"📊 위치 데이터",-1)),(0,a.bF)(o.eB,{name:"fade"},{default:(0,a.k6)((()=>[t.value.length?((0,a.uX)(),(0,a.CE)("div",Bt,["stationary"===m.value?((0,a.uX)(),(0,a.CE)("div",At," 중심점: 위도 "+(0,n.v_)(p.value.lat.toFixed(6))+", 경도 "+(0,n.v_)(p.value.lon.toFixed(6)),1)):(0,a.Q3)("",!0),(0,a.Lk)("div",Gt,[(0,a.Lk)("table",Et,[(0,a.Lk)("thead",null,[(0,a.Lk)("tr",Kt,[s[12]||(s[12]=(0,a.Lk)("th",{class:"header-cell"},"#",-1)),s[13]||(s[13]=(0,a.Lk)("th",{class:"header-cell"},"시간",-1)),"moving"===m.value?((0,a.uX)(),(0,a.CE)(a.FK,{key:0},[s[10]||(s[10]=(0,a.Lk)("th",{class:"header-cell"},"레퍼런스 위도",-1)),s[11]||(s[11]=(0,a.Lk)("th",{class:"header-cell"},"레퍼런스 경도",-1))],64)):(0,a.Q3)("",!0),s[14]||(s[14]=(0,a.Lk)("th",{class:"header-cell"},"측정 위도",-1)),s[15]||(s[15]=(0,a.Lk)("th",{class:"header-cell"},"측정 경도",-1)),s[16]||(s[16]=(0,a.Lk)("th",{class:"header-cell"},"PACC_3D (m)",-1)),s[17]||(s[17]=(0,a.Lk)("th",{class:"header-cell"},"PACC_H (m)",-1)),s[18]||(s[18]=(0,a.Lk)("th",{class:"header-cell"},"PACC_V (m)",-1))])]),(0,a.Lk)("tbody",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(t.value,((e,t)=>((0,a.uX)(),(0,a.CE)("tr",{key:t,class:"data-row"},[(0,a.Lk)("td",Wt,(0,n.v_)(t+1),1),(0,a.Lk)("td",Nt,(0,n.v_)(B(e.test.time)),1),"moving"===m.value?((0,a.uX)(),(0,a.CE)(a.FK,{key:0},[(0,a.Lk)("td",zt,(0,n.v_)(e.reference.lat.toFixed(6)),1),(0,a.Lk)("td",Vt,(0,n.v_)(e.reference.lon.toFixed(6)),1)],64)):(0,a.Q3)("",!0),(0,a.Lk)("td",$t,(0,n.v_)(e.test.lat.toFixed(6)),1),(0,a.Lk)("td",Qt,(0,n.v_)(e.test.lon.toFixed(6)),1),(0,a.Lk)("td",Xt,(0,n.v_)(e.dist3d.toFixed(3)),1),(0,a.Lk)("td",Yt,(0,n.v_)(e.distH.toFixed(3)),1),(0,a.Lk)("td",Ut,(0,n.v_)(e.distV.toFixed(3)),1)])))),128))])])])])):((0,a.uX)(),(0,a.CE)("div",Dt," 파일을 업로드하면 분석 결과가 여기에 표시됩니다. "))])),_:1}),s[30]||(s[30]=(0,a.Lk)("h2",{class:"mt-6 font-semibold"},"📈 시각화",-1)),(0,a.bF)(o.eB,{name:"fade"},{default:(0,a.k6)((()=>[t.value.length?((0,a.uX)(),(0,a.CE)("div",Ht,["stationary"===m.value?((0,a.uX)(),(0,a.CE)("div",qt,[(0,a.Lk)("canvas",{ref_key:"chartRef",ref:v},null,512)])):((0,a.uX)(),(0,a.CE)("div",Zt,[(0,a.bF)((0,r.R1)(Ie),{ref_key:"map",ref:b,zoom:f.value,"onUpdate:zoom":s[3]||(s[3]=e=>f.value=e),center:g.value,"use-global-leaflet":!1,class:"map",onReady:k},{default:(0,a.k6)((()=>[(0,a.bF)((0,r.R1)(ut),{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png","layer-type":"base",name:"OpenStreetMap"}),(0,a.bF)((0,r.R1)(Ue),{"lat-lngs":L.value,color:"blue",weight:3,opacity:.7},null,8,["lat-lngs"]),(0,a.bF)((0,r.R1)(Ue),{"lat-lngs":_.value,color:"red",weight:3,opacity:.7},null,8,["lat-lngs"]),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(l.value,((e,t)=>((0,a.uX)(),(0,a.Wv)((0,r.R1)(q),{key:"ref-"+t,"lat-lng":[e.lat,e.lon],radius:4,color:"blue",fill:!0,"fill-color":"blue","fill-opacity":.6},{default:(0,a.k6)((()=>[(0,a.bF)((0,r.R1)(lt),null,{default:(0,a.k6)((()=>[(0,a.eW)(" 시간: "+(0,n.v_)(B(e.time)),1),s[19]||(s[19]=(0,a.Lk)("br",null,null,-1)),(0,a.eW)(" 위도: "+(0,n.v_)(e.lat.toFixed(6)),1),s[20]||(s[20]=(0,a.Lk)("br",null,null,-1)),(0,a.eW)(" 경도: "+(0,n.v_)(e.lon.toFixed(6)),1)])),_:2},1024)])),_:2},1032,["lat-lng"])))),128)),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.value,((e,t)=>((0,a.uX)(),(0,a.Wv)((0,r.R1)(q),{key:"test-"+t,"lat-lng":[e.lat,e.lon],radius:4,color:"red",fill:!0,"fill-color":"red","fill-opacity":.6},{default:(0,a.k6)((()=>[(0,a.bF)((0,r.R1)(lt),null,{default:(0,a.k6)((()=>[(0,a.eW)(" 시간: "+(0,n.v_)(B(e.time)),1),s[21]||(s[21]=(0,a.Lk)("br",null,null,-1)),(0,a.eW)(" 위도: "+(0,n.v_)(e.lat.toFixed(6)),1),s[22]||(s[22]=(0,a.Lk)("br",null,null,-1)),(0,a.eW)(" 경도: "+(0,n.v_)(e.lon.toFixed(6)),1)])),_:2},1024)])),_:2},1032,["lat-lng"])))),128))])),_:1},8,["zoom","center"]),s[23]||(s[23]=(0,a.Lk)("div",{class:"map-legend"},[(0,a.Lk)("div",{class:"legend-title"},"GPS 데이터 범례"),(0,a.Lk)("div",{class:"legend-item"},[(0,a.Lk)("div",{class:"legend-color",style:{"background-color":"blue"}}),(0,a.Lk)("div",{class:"legend-label"},"레퍼런스 GPS")]),(0,a.Lk)("div",{class:"legend-item"},[(0,a.Lk)("div",{class:"legend-color",style:{"background-color":"red"}}),(0,a.Lk)("div",{class:"legend-label"},"측정 GPS")]),(0,a.Lk)("div",{class:"legend-info"},[(0,a.Lk)("div",{class:"info-item"},"• 실선: GPS 트랙"),(0,a.Lk)("div",{class:"info-item"},"• 원형 마커: GPS 포인트"),(0,a.Lk)("div",{class:"info-item"},"• 클릭: 상세 정보 표시")])],-1))]))])):((0,a.uX)(),(0,a.CE)("div",Jt," 파일을 업로드하면 분석 결과가 여기에 표시됩니다. "))])),_:1}),s[31]||(s[31]=(0,a.Lk)("h2",{class:"mt-6 font-semibold"},"📌 통계",-1)),(0,a.bF)(o.eB,{name:"fade"},{default:(0,a.k6)((()=>[t.value.length?((0,a.uX)(),(0,a.CE)("div",el,[(0,a.Lk)("table",tl,[s[27]||(s[27]=(0,a.Lk)("thead",null,[(0,a.Lk)("tr",null,[(0,a.Lk)("th",null,"ITEMS"),(0,a.Lk)("th",null,"CEP50"),(0,a.Lk)("th",null,"CEP68"),(0,a.Lk)("th",null,"CEP95"),(0,a.Lk)("th",null,"CEP99"),(0,a.Lk)("th",null,"최소 거리"),(0,a.Lk)("th",null,"최대 거리"),(0,a.Lk)("th",null,"평균 거리")])],-1)),(0,a.Lk)("tbody",null,[(0,a.Lk)("tr",null,[s[24]||(s[24]=(0,a.Lk)("td",null,"PACC_3D",-1)),(0,a.Lk)("td",null,(0,n.v_)(u.value.pacc_3d.cep50.toFixed(3))+" m",1),(0,a.Lk)("td",null,(0,n.v_)(u.value.pacc_3d.cep68.toFixed(3))+" m",1),(0,a.Lk)("td",null,(0,n.v_)(u.value.pacc_3d.cep95.toFixed(3))+" m",1),(0,a.Lk)("td",null,(0,n.v_)(u.value.pacc_3d.cep99.toFixed(3))+" m",1),(0,a.Lk)("td",null,(0,n.v_)(u.value.pacc_3d.min.toFixed(3))+" m",1),(0,a.Lk)("td",null,(0,n.v_)(u.value.pacc_3d.max.toFixed(3))+" m",1),(0,a.Lk)("td",null,(0,n.v_)(u.value.pacc_3d.avg.toFixed(3))+" m",1)]),(0,a.Lk)("tr",null,[s[25]||(s[25]=(0,a.Lk)("td",null,"PACC_H",-1)),(0,a.Lk)("td",null,(0,n.v_)(u.value.pacc_h.cep50.toFixed(3))+" m",1),(0,a.Lk)("td",null,(0,n.v_)(u.value.pacc_h.cep68.toFixed(3))+" m",1),(0,a.Lk)("td",null,(0,n.v_)(u.value.pacc_h.cep95.toFixed(3))+" m",1),(0,a.Lk)("td",null,(0,n.v_)(u.value.pacc_h.cep99.toFixed(3))+" m",1),(0,a.Lk)("td",null,(0,n.v_)(u.value.pacc_h.min.toFixed(3))+" m",1),(0,a.Lk)("td",null,(0,n.v_)(u.value.pacc_h.max.toFixed(3))+" m",1),(0,a.Lk)("td",null,(0,n.v_)(u.value.pacc_h.avg.toFixed(3))+" m",1)]),(0,a.Lk)("tr",null,[s[26]||(s[26]=(0,a.Lk)("td",null,"PACC_V",-1)),(0,a.Lk)("td",null,(0,n.v_)(u.value.pacc_v.cep50.toFixed(3))+" m",1),(0,a.Lk)("td",null,(0,n.v_)(u.value.pacc_v.cep68.toFixed(3))+" m",1),(0,a.Lk)("td",null,(0,n.v_)(u.value.pacc_v.cep95.toFixed(3))+" m",1),(0,a.Lk)("td",null,(0,n.v_)(u.value.pacc_v.cep99.toFixed(3))+" m",1),(0,a.Lk)("td",null,(0,n.v_)(u.value.pacc_v.min.toFixed(3))+" m",1),(0,a.Lk)("td",null,(0,n.v_)(u.value.pacc_v.max.toFixed(3))+" m",1),(0,a.Lk)("td",null,(0,n.v_)(u.value.pacc_v.avg.toFixed(3))+" m",1)])])])])):((0,a.uX)(),(0,a.CE)("div",ll," 파일을 업로드하면 분석 결과가 여기에 표시됩니다. "))])),_:1})]))}},ol=l(1241);const nl=(0,ol.A)(al,[["__scopeId","data-v-232703e0"]]);var rl=nl}}]);
//# sourceMappingURL=139.44e93413.js.map
"use strict";(self["webpackChunknovatool_claude"]=self["webpackChunknovatool_claude"]||[]).push([[714],{3714:function(e,a,t){t.r(a),t.d(a,{default:function(){return q}});t(4114),t(8111),t(2489),t(7588),t(1701),t(8237);var l=t(6768),s=t(4232),c=t(144),r=t(6912);const o={class:"p-4 space-y-4"},d={key:0},p={style:{height:"300px","overflow-y":"auto"}},n={class:"table-auto border border-collapse w-full text-sm"},i={class:"border px-2"},u={class:"border px-2"},v={class:"border px-2"},x={class:"border px-2"},h={class:"mt-6 font-semibold"},b={class:"table-auto border border-collapse text-sm"},k={class:"border px-2"},_={class:"border px-2"},m={class:"border px-2"},L={class:"border px-2"},g={class:"border px-2"},f={class:"border px-2"},F={class:"border px-2"},C={class:"border px-2"},P={class:"border px-2"},M={class:"border px-2"},y={class:"border px-2"},E={class:"border px-2"},N={class:"border px-2"},R={class:"border px-2"},w={class:"border px-2"},A={class:"border px-2"},S={class:"border px-2"},K={class:"border px-2"},G={class:"border px-2"},W={class:"border px-2"},I={class:"border px-2"};var V={__name:"NmeaCEPCalc",setup(e){r.t1.register(r.Pz,r.kc,r.FN,r.hE);const a=(0,c.KR)([]),t=(0,c.KR)({pacc_3d:{cep50:0,cep68:0,cep95:0,cep99:0,min:0,max:0,avg:0},pacc_h:{cep50:0,cep68:0,cep95:0,cep99:0,min:0,max:0,avg:0},pacc_v:{cep50:0,cep68:0,cep95:0,cep99:0,min:0,max:0,avg:0}}),V=(0,c.KR)({lat:0,lon:0}),$=(0,c.KR)(0),T=(0,c.KR)(0),q=(0,c.KR)(0),D=(0,c.KR)(0),X=(0,c.KR)();let z=null;function H(e){const a=e.target.files[0];if(!a)return;const t=new FileReader;t.onload=()=>B(t.result),t.readAsText(a)}function O(e,a){const t=U(e.lat,e.lon,a.lat,a.lon),l=Math.abs(a.alt-e.alt);return Math.sqrt(t*t+l*l)}function Q(e,a){return U(e.lat,e.lon,a.lat,a.lon)}function Y(e,a){return Math.abs(a.alt-e.alt)}function j(e){const a=e.reduce(((e,a)=>e+a),0)/e.length,t=Math.sqrt(e.reduce(((e,t)=>e+Math.pow(t-a,2)),0)/e.length),l=e.filter((e=>Math.abs(e-a)<=3*t)),s=l.sort(((e,a)=>e-a)),c=s.length,r=Math.round(.5*c)-1,o=Math.round(.68*c)-1,d=Math.round(.95*c)-1,p=Math.round(.99*c)-1;return{cep50:s[r]||0,cep68:s[o]||0,cep95:s[d]||0,cep99:s[p]||0,min:s[0]||0,max:s[s.length-1]||0,avg:s.reduce(((e,a)=>e+a),0)/c||0}}function B(e){const s=e.split(/\r?\n/),c=[];let r=0;for(const a of s){let e="",t="",l="",s="";if(a.startsWith("$GNGGA")||a.startsWith("$GPGGA")){const c=a.split(",");e=c[2],t=c[3],l=c[4],s=c[5],r=isNaN(parseFloat(c[9]))?0:parseFloat(c[9])}else if(a.startsWith("$GNRMC")||a.startsWith("$GPRMC")){const c=a.split(",");e=c[3],t=c[4],l=c[5],s=c[6]}const o=J(e,t),d=J(l,s);isNaN(o)||isNaN(d)||c.push({lat:o,lon:d,alt:r})}if(0===c.length)return;const o=c.reduce(((e,a)=>e+a.lat),0)/c.length,d=c.reduce(((e,a)=>e+a.lon),0)/c.length,p=c.reduce(((e,a)=>e+a.alt),0)/c.length;V.value={lat:o,lon:d,alt:p},a.value=c.map((e=>({lat:e.lat,lon:e.lon,alt:e.alt,dist:U(o,d,e.lat,e.lon),dist3d:O(V.value,e),distH:Q(V.value,e),distV:Y(V.value,e)}))),t.value.pacc_3d=j(a.value.map((e=>e.dist3d))),t.value.pacc_h=j(a.value.map((e=>e.distH))),t.value.pacc_v=j(a.value.map((e=>e.distV))),$.value=t.value.pacc_3d.cep50,T.value=t.value.pacc_3d.cep68,q.value=t.value.pacc_3d.cep95,D.value=t.value.pacc_3d.cep99,a.value.length>0&&(0,l.dY)((()=>Z()))}function J(e,a){const t=parseFloat(e.slice(0,"N"===a||"S"===a?2:3)),l=parseFloat(e.slice("N"===a||"S"===a?2:3));let s=t+l/60;return"S"!==a&&"W"!==a||(s*=-1),s}function U(e,a,t,l){const s=6371e3,c=e=>e*Math.PI/180,r=c(t-e),o=c(l-a),d=Math.sin(r/2)**2+Math.cos(c(e))*Math.cos(c(t))*Math.sin(o/2)**2;return 2*s*Math.atan2(Math.sqrt(d),Math.sqrt(1-d))}function Z(){if(!X.value)return;z&&z.destroy();const e=a.value.map((e=>({x:U(V.value.lat,V.value.lon,V.value.lat,e.lon)*(e.lon>V.value.lon?1:-1),y:U(V.value.lat,V.value.lon,e.lat,V.value.lon)*(e.lat>V.value.lat?1:-1)}))),t=1.2*Math.max(...e.map((e=>Math.abs(e.x))),...e.map((e=>Math.abs(e.y))));z=new r.t1(X.value,{type:"scatter",data:{datasets:[{label:"Position Data",data:e,backgroundColor:"rgba(0, 0, 255, 0.6)",pointRadius:4}]},options:{aspectRatio:1,responsive:!0,scales:{x:{title:{display:!0,text:"East-West (meters)"},min:-t,max:t,grid:{color:"rgba(0, 0, 0, 0.1)",drawTicks:!0,drawOnChartArea:!0},ticks:{stepSize:t/5}},y:{title:{display:!0,text:"North-South (meters)"},min:-t,max:t,grid:{color:"rgba(0, 0, 0, 0.1)",drawTicks:!0,drawOnChartArea:!0},ticks:{stepSize:t/5}}},plugins:{title:{display:!0,text:"Position Scatter Plot with CEP Circles",padding:20},legend:{display:!0,position:"bottom"},cepCircles:{radii:[{value:$.value,label:"CEP50"},{value:T.value,label:"CEP68"},{value:q.value,label:"CEP95"},{value:D.value,label:"CEP99"}]}}},plugins:[{id:"cepCircles",beforeDatasetsDraw(e,a,t){const{ctx:l,scales:s}=e,c=s.x.getPixelForValue(0),r=s.y.getPixelForValue(0),o=t.radii||[],d=["red","blue","orange","green"];l.save(),o.forEach(((e,a)=>{const t=Math.abs(s.x.getPixelForValue(e.value)-c);l.beginPath(),l.arc(c,r,t,0,2*Math.PI),l.strokeStyle=d[a].replace("0.2","1.0"),l.lineWidth=2,l.stroke();const o=Math.PI/4,p=c+t*Math.cos(o),n=r-t*Math.sin(o);l.fillStyle=d[a].replace("0.2","1.0"),l.font="12px Arial",l.textAlign="left",l.fillText(`${e.label}: ${e.value.toFixed(2)}m`,p,n)})),l.restore()}}]})}return(e,c)=>((0,l.uX)(),(0,l.CE)("div",o,[c[7]||(c[7]=(0,l.Lk)("h1",{class:"text-xl font-bold"},"NMEA CEP Í≥ÑÏÇ∞Í∏∞",-1)),(0,l.Lk)("input",{type:"file",accept:".txt",onChange:H,class:"mb-4"},null,32),a.value.length?((0,l.uX)(),(0,l.CE)("div",d,[c[5]||(c[5]=(0,l.Lk)("h2",{class:"font-semibold"},"üìä ÏúÑÏπò Îç∞Ïù¥ÌÑ∞",-1)),(0,l.Lk)("div",p,[(0,l.Lk)("table",n,[c[0]||(c[0]=(0,l.Lk)("thead",{class:"bg-gray-100 sticky top-0"},[(0,l.Lk)("tr",null,[(0,l.Lk)("th",{class:"border px-2"},"#"),(0,l.Lk)("th",{class:"border px-2"},"ÏúÑÎèÑ"),(0,l.Lk)("th",{class:"border px-2"},"Í≤ΩÎèÑ"),(0,l.Lk)("th",{class:"border px-2"},"Í±∞Î¶¨ (m)")])],-1)),(0,l.Lk)("tbody",null,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(a.value,((e,a)=>((0,l.uX)(),(0,l.CE)("tr",{key:a},[(0,l.Lk)("td",i,(0,s.v_)(a+1),1),(0,l.Lk)("td",u,(0,s.v_)(e.lat.toFixed(6)),1),(0,l.Lk)("td",v,(0,s.v_)(e.lon.toFixed(6)),1),(0,l.Lk)("td",x,(0,s.v_)(e.dist.toFixed(3)),1)])))),128))])])]),(0,l.Lk)("h2",h," üìà Í∑∏ÎûòÌîÑ (CEP50="+(0,s.v_)($.value.toFixed(3))+"m, CEP68="+(0,s.v_)(T.value.toFixed(3))+"m, CEP95="+(0,s.v_)(q.value.toFixed(3))+"m, CEP99="+(0,s.v_)(D.value.toFixed(3))+"m) ",1),(0,l.Lk)("canvas",{ref_key:"chartRef",ref:X},null,512),c[6]||(c[6]=(0,l.Lk)("h2",{class:"mt-6 font-semibold"},"üìå ÌÜµÍ≥Ñ",-1)),(0,l.Lk)("table",b,[c[4]||(c[4]=(0,l.Lk)("thead",{class:"bg-gray-100"},[(0,l.Lk)("tr",null,[(0,l.Lk)("th",{class:"border px-2"},"ITEMS"),(0,l.Lk)("th",{class:"border px-2"},"CEP50"),(0,l.Lk)("th",{class:"border px-2"},"CEP68"),(0,l.Lk)("th",{class:"border px-2"},"CEP95"),(0,l.Lk)("th",{class:"border px-2"},"CEP99"),(0,l.Lk)("th",{class:"border px-2"},"ÏµúÏÜå Í±∞Î¶¨"),(0,l.Lk)("th",{class:"border px-2"},"ÏµúÎåÄ Í±∞Î¶¨"),(0,l.Lk)("th",{class:"border px-2"},"ÌèâÍ∑† Í±∞Î¶¨")])],-1)),(0,l.Lk)("tbody",null,[(0,l.Lk)("tr",null,[c[1]||(c[1]=(0,l.Lk)("td",{class:"border px-2"},"PACC_3D",-1)),(0,l.Lk)("td",k,(0,s.v_)(t.value.pacc_3d.cep50.toFixed(3))+" m",1),(0,l.Lk)("td",_,(0,s.v_)(t.value.pacc_3d.cep68.toFixed(3))+" m",1),(0,l.Lk)("td",m,(0,s.v_)(t.value.pacc_3d.cep95.toFixed(3))+" m",1),(0,l.Lk)("td",L,(0,s.v_)(t.value.pacc_3d.cep99.toFixed(3))+" m",1),(0,l.Lk)("td",g,(0,s.v_)(t.value.pacc_3d.min.toFixed(3))+" m",1),(0,l.Lk)("td",f,(0,s.v_)(t.value.pacc_3d.max.toFixed(3))+" m",1),(0,l.Lk)("td",F,(0,s.v_)(t.value.pacc_3d.avg.toFixed(3))+" m",1)]),(0,l.Lk)("tr",null,[c[2]||(c[2]=(0,l.Lk)("td",{class:"border px-2"},"PACC_H",-1)),(0,l.Lk)("td",C,(0,s.v_)(t.value.pacc_h.cep50.toFixed(3))+" m",1),(0,l.Lk)("td",P,(0,s.v_)(t.value.pacc_h.cep68.toFixed(3))+" m",1),(0,l.Lk)("td",M,(0,s.v_)(t.value.pacc_h.cep95.toFixed(3))+" m",1),(0,l.Lk)("td",y,(0,s.v_)(t.value.pacc_h.cep99.toFixed(3))+" m",1),(0,l.Lk)("td",E,(0,s.v_)(t.value.pacc_h.min.toFixed(3))+" m",1),(0,l.Lk)("td",N,(0,s.v_)(t.value.pacc_h.max.toFixed(3))+" m",1),(0,l.Lk)("td",R,(0,s.v_)(t.value.pacc_h.avg.toFixed(3))+" m",1)]),(0,l.Lk)("tr",null,[c[3]||(c[3]=(0,l.Lk)("td",{class:"border px-2"},"PACC_V",-1)),(0,l.Lk)("td",w,(0,s.v_)(t.value.pacc_v.cep50.toFixed(3))+" m",1),(0,l.Lk)("td",A,(0,s.v_)(t.value.pacc_v.cep68.toFixed(3))+" m",1),(0,l.Lk)("td",S,(0,s.v_)(t.value.pacc_v.cep95.toFixed(3))+" m",1),(0,l.Lk)("td",K,(0,s.v_)(t.value.pacc_v.cep99.toFixed(3))+" m",1),(0,l.Lk)("td",G,(0,s.v_)(t.value.pacc_v.min.toFixed(3))+" m",1),(0,l.Lk)("td",W,(0,s.v_)(t.value.pacc_v.max.toFixed(3))+" m",1),(0,l.Lk)("td",I,(0,s.v_)(t.value.pacc_v.avg.toFixed(3))+" m",1)])])])])):(0,l.Q3)("",!0)]))}},$=t(1241);const T=(0,$.A)(V,[["__scopeId","data-v-0eeb0758"]]);var q=T}}]);
//# sourceMappingURL=714.ebfbfa21.js.map